(function(t){function e(e){for(var i,s,r=e[0],l=e[1],c=e[2],p=0,d=[];p<r.length;p++)s=r[p],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&d.push(n[s][0]),n[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);m&&m(e);while(d.length)d.shift()();return o.push.apply(o,c||[]),a()}function a(){for(var t,e=0;e<o.length;e++){for(var a=o[e],i=!0,r=1;r<a.length;r++){var l=a[r];0!==n[l]&&(i=!1)}i&&(o.splice(e--,1),t=s(s.s=a[0]))}return t}var i={},n={app:0},o=[];function s(e){if(i[e])return i[e].exports;var a=i[e]={i:e,l:!1,exports:{}};return t[e].call(a.exports,a,a.exports,s),a.l=!0,a.exports}s.m=t,s.c=i,s.d=function(t,e,a){s.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:a})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,e){if(1&e&&(t=s(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var a=Object.create(null);if(s.r(a),Object.defineProperty(a,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var i in t)s.d(a,i,function(e){return t[e]}.bind(null,i));return a},s.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(e,"a",e),e},s.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=e,r=r.slice();for(var c=0;c<r.length;c++)e(r[c]);var m=l;o.push([0,"chunk-vendors"]),a()})({0:function(t,e,a){t.exports=a("56d7")},"344e":function(t,e,a){"use strict";a("907b")},"56d7":function(t,e,a){"use strict";a.r(e);var i=a("2b0e"),n=function(){var t=this,e=t._self._c;return e("div",{directives:[{name:"shortkey",rawName:"v-shortkey",value:{caption:["ctrl","c"],dat:["ctrl","u"]},expression:"{\n      caption: ['ctrl', 'c'],\n      dat: ['ctrl', 'u'],\n    }"}],staticClass:"nocursor",attrs:{id:"app"},on:{shortkey:t.shortcuts}},[e("keep-alive",[t.showDat?e("div",[e("dat-gui",{staticClass:"dat-gui-ui",attrs:{closeText:"Close controls",openText:"Open controls",closePosition:"bottom"}},[e("dat-folder",{attrs:{label:"Map Properties"}},[e("dat-number",{attrs:{min:0,max:4,step:.1,label:"Country Line Width"},model:{value:t.mapCountryLineWidth,callback:function(e){t.mapCountryLineWidth=e},expression:"mapCountryLineWidth"}}),e("dat-number",{attrs:{min:0,max:1,step:.01,label:"Country Line Opacity"},model:{value:t.mapCountryLineOpacity,callback:function(e){t.mapCountryLineOpacity=e},expression:"mapCountryLineOpacity"}}),e("dat-color",{attrs:{label:"Land Color"},model:{value:t.mapLandColor,callback:function(e){t.mapLandColor=e},expression:"mapLandColor"}}),e("dat-number",{attrs:{min:0,max:1,step:.005,label:"Satellite Opacity"},model:{value:t.mapSatelliteOpacity,callback:function(e){t.mapSatelliteOpacity=e},expression:"mapSatelliteOpacity"}}),e("dat-select",{attrs:{items:t.compositeOptions,label:"Composite Operation"},model:{value:t.compositeSelected,callback:function(e){t.compositeSelected=e},expression:"compositeSelected"}})],1),e("dat-folder",{attrs:{label:"Birds"}},[e("dat-boolean",{attrs:{label:"Display Layer"},model:{value:t.birdsOn,callback:function(e){t.birdsOn=e},expression:"birdsOn"}}),e("dat-color",{attrs:{label:"Birds Color"},model:{value:t.birdsColor,callback:function(e){t.birdsColor=e},expression:"birdsColor"}}),e("dat-number",{attrs:{min:0,max:1,step:.01,label:"Velocity Scale"},model:{value:t.birdsActive.VELOCITY_SCALE,callback:function(e){t.$set(t.birdsActive,"VELOCITY_SCALE",e)},expression:"birdsActive.VELOCITY_SCALE"}}),e("dat-number",{attrs:{min:0,max:200,step:1,label:"Max Particle Age"},model:{value:t.birdsActive.MAX_PARTICLE_AGE,callback:function(e){t.$set(t.birdsActive,"MAX_PARTICLE_AGE",e)},expression:"birdsActive.MAX_PARTICLE_AGE"}}),e("dat-number",{attrs:{min:0,max:2,step:.05,label:"Particle Multiplier"},model:{value:t.birdsActive.PARTICLE_MULTIPLIER,callback:function(e){t.$set(t.birdsActive,"PARTICLE_MULTIPLIER",e)},expression:"birdsActive.PARTICLE_MULTIPLIER"}}),e("dat-number",{attrs:{min:0,max:1,step:.01,label:"Fade Transparency"},model:{value:t.birdsActive.FADE_TRANSPARENCY,callback:function(e){t.$set(t.birdsActive,"FADE_TRANSPARENCY",e)},expression:"birdsActive.FADE_TRANSPARENCY"}}),e("dat-number",{attrs:{min:0,max:1,step:.01,label:"Color Alpha"},model:{value:t.birdsActive.COLOR_ALPHA,callback:function(e){t.$set(t.birdsActive,"COLOR_ALPHA",e)},expression:"birdsActive.COLOR_ALPHA"}})],1),e("dat-folder",{attrs:{label:"Mammals"}},[e("dat-boolean",{attrs:{label:"Display Layer"},model:{value:t.mammalsOn,callback:function(e){t.mammalsOn=e},expression:"mammalsOn"}}),e("dat-color",{attrs:{label:"Mammals Color"},model:{value:t.mammalsColor,callback:function(e){t.mammalsColor=e},expression:"mammalsColor"}}),e("dat-number",{attrs:{min:0,max:1,step:.01,label:"Velocity Scale"},model:{value:t.mammalsActive.VELOCITY_SCALE,callback:function(e){t.$set(t.mammalsActive,"VELOCITY_SCALE",e)},expression:"mammalsActive.VELOCITY_SCALE"}}),e("dat-number",{attrs:{min:0,max:200,step:1,label:"Max Particle Age"},model:{value:t.mammalsActive.MAX_PARTICLE_AGE,callback:function(e){t.$set(t.mammalsActive,"MAX_PARTICLE_AGE",e)},expression:"mammalsActive.MAX_PARTICLE_AGE"}}),e("dat-number",{attrs:{min:0,max:2,step:.05,label:"Particle Multiplier"},model:{value:t.mammalsActive.PARTICLE_MULTIPLIER,callback:function(e){t.$set(t.mammalsActive,"PARTICLE_MULTIPLIER",e)},expression:"mammalsActive.PARTICLE_MULTIPLIER"}}),e("dat-number",{attrs:{min:0,max:1,step:.01,label:"Fade Transparency"},model:{value:t.mammalsActive.FADE_TRANSPARENCY,callback:function(e){t.$set(t.mammalsActive,"FADE_TRANSPARENCY",e)},expression:"mammalsActive.FADE_TRANSPARENCY"}}),e("dat-number",{attrs:{min:0,max:1,step:.01,label:"Color Alpha"},model:{value:t.mammalsActive.COLOR_ALPHA,callback:function(e){t.$set(t.mammalsActive,"COLOR_ALPHA",e)},expression:"mammalsActive.COLOR_ALPHA"}})],1),e("dat-folder",{attrs:{label:"Amphibians"}},[e("dat-boolean",{attrs:{label:"Display Layer"},model:{value:t.amphibsOn,callback:function(e){t.amphibsOn=e},expression:"amphibsOn"}}),e("dat-color",{attrs:{label:"Amphibs Color"},model:{value:t.amphibsColor,callback:function(e){t.amphibsColor=e},expression:"amphibsColor"}}),e("dat-number",{attrs:{min:0,max:1,step:.01,label:"Velocity Scale"},model:{value:t.amphibsActive.VELOCITY_SCALE,callback:function(e){t.$set(t.amphibsActive,"VELOCITY_SCALE",e)},expression:"amphibsActive.VELOCITY_SCALE"}}),e("dat-number",{attrs:{min:0,max:200,step:1,label:"Max Particle Age"},model:{value:t.amphibsActive.MAX_PARTICLE_AGE,callback:function(e){t.$set(t.amphibsActive,"MAX_PARTICLE_AGE",e)},expression:"amphibsActive.MAX_PARTICLE_AGE"}}),e("dat-number",{attrs:{min:0,max:2,step:.05,label:"Particle Multiplier"},model:{value:t.amphibsActive.PARTICLE_MULTIPLIER,callback:function(e){t.$set(t.amphibsActive,"PARTICLE_MULTIPLIER",e)},expression:"amphibsActive.PARTICLE_MULTIPLIER"}}),e("dat-number",{attrs:{min:0,max:1,step:.01,label:"Fade Transparency"},model:{value:t.amphibsActive.FADE_TRANSPARENCY,callback:function(e){t.$set(t.amphibsActive,"FADE_TRANSPARENCY",e)},expression:"amphibsActive.FADE_TRANSPARENCY"}}),e("dat-number",{attrs:{min:0,max:1,step:.01,label:"Color Alpha"},model:{value:t.amphibsActive.COLOR_ALPHA,callback:function(e){t.$set(t.amphibsActive,"COLOR_ALPHA",e)},expression:"amphibsActive.COLOR_ALPHA"}})],1)],1)],1):t._e()]),t.showCaption?e("div",{attrs:{id:"viz-meta"}},[t._m(0),e("div",{attrs:{id:"legend-inline"}},[t.birdsOn?e("div",{staticClass:"legend-item-inline"},[e("div",{staticClass:"legend-color",style:{"background-color":t.birdsColor}}),e("div",{staticClass:"legend-text"},[t._v("Birds")])]):t._e(),t.mammalsOn?e("div",{staticClass:"legend-item-inline"},[e("div",{staticClass:"legend-color",style:{"background-color":t.mammalsColor}}),e("div",{staticClass:"legend-text"},[t._v("Mammals")])]):t._e(),t.amphibsOn?e("div",{staticClass:"legend-item-inline"},[e("div",{staticClass:"legend-color",style:{"background-color":t.amphibsColor}}),e("div",{staticClass:"legend-text"},[t._v("Amphibians")])]):t._e()]),e("div",[e("p",[t._v(" As climate change alters habitats and disrupts ecosystems, where will animals move to survive? And will human development prevent them from getting there? ")]),e("p",[t._v(" This map shows the average direction mammals, birds, and amphibians need to move to track hospitable climates as they shift across the landscape. â†“ ")]),e("h2",[t._v("How?")]),e("p",[t._v(" Researchers from University of Washington and The Nature Conservancy modeled potential habitat for 2954 species using climate change projections and the climatic needs of each species. ")]),t._m(1),e("h2",[t._v("What Can We Do?")]),t._m(2),e("h2",[t._v("So...")]),t._m(3),t._m(4),e("h2",[t._v("Credits")]),t._m(5),t._m(6),e("h2",[t._v("Bonus Fun!")]),t._m(7),e("div",{attrs:{id:"switch-container"}},[e("label",{staticClass:"switch"},[e("input",{attrs:{type:"checkbox"},on:{click:t.toggleDat}}),e("span",{staticClass:"slider round"})]),e("span",{staticClass:"switch-label"},[t._v("Visualization Controls")])]),e("h2",[t._v("References")]),t._m(8),t._m(9)]),e("img",{staticClass:"tnc-logo",attrs:{src:"tnc-logo-light.svg",alt:"The Nature Conservancy"}})]):t._e(),e("div",{staticClass:"wind-map-container nocursor",class:{hide:!t.birdsOn},staticStyle:{display:"initial"},attrs:{id:"windContainerbirds"}}),e("div",{staticClass:"wind-map-container nocursor",class:{hide:!t.mammalsOn},staticStyle:{display:"initial"},attrs:{id:"windContainermammals"}}),e("div",{staticClass:"wind-map-container nocursor",class:{hide:!t.amphibsOn},staticStyle:{display:"initial"},attrs:{id:"windContaineramphibs"}}),t._m(10)],1)},o=[function(){var t=this,e=t._self._c;return e("h1",[t._v("Migrations "),e("br",{staticClass:"title-break"}),t._v("In Motion")])},function(){var t=this,e=t._self._c;return e("p",[t._v(" Using flow models from "),e("a",{attrs:{href:"https://www.circuitscape.org/",target:"_blank"}},[t._v("electronic circuit theory")]),t._v(", they plotted movement routes for each species, connecting current habitats with their projected locations under climate change. ")])},function(){var t=this,e=t._self._c;return e("p",[t._v(" There are a number of ways that conservationists and land managers can "),e("a",{attrs:{href:"https://blog.nature.org/science/2016/06/29/species-on-the-move-mapping-barriers-for-wildlife-in-a-warming-world/?utm_source=cgs&utm_medium=alsoin&utm_campaign=migrations",target:"_blank"}},[t._v("re-build or maintain connectivity")]),t._v(" to improve speciesâ€™ ability to adapt to warmer temperatures. Removing fencing, adding wildlife overpasses (or underpasses) to major roadways, and better routing of infrastructure like pipelines and powerlines can all help re-connect areas fragmented by human development. ")])},function(){var t=this,e=t._self._c;return e("p",[e("strong",[t._v("Q: Does this mean 3000 species will move through my backyard because of climate change?")])])},function(){var t=this,e=t._self._c;return e("p",[e("strong",[t._v("A:")]),t._v(" No, the researchers used coarse 50 km data, which is good for understanding the big picture view, but not good for understanding local patterns. ")])},function(){var t=this,e=t._self._c;return e("p",[t._v(" This map was created by "),e("a",{attrs:{href:"mailto:dmajka@tnc.org",target:"_blank"}},[t._v("Dan Majka")]),t._v(", who works for The Nature Conservancy's North America Region science team. ")])},function(){var t=this,e=t._self._c;return e("p",[t._v(" This work would have not been possible without the "),e("a",{attrs:{href:"https://blog.nature.org/science/2018/04/26/innovation-for-conservation-brad-mcrae-1966-2017/",target:"_blank"}},[t._v("pioneering connectivity science of Brad McRae (1966-2017)")]),t._v(". ")])},function(){var t=this,e=t._self._c;return e("p",[t._v(" The visualization uses code adapted from "),e("a",{attrs:{href:"https://github.com/FreshyLabs/windy"}},[t._v("windy-js")]),t._v(", which adapated code from the "),e("a",{attrs:{href:"https://github.com/cambecc/earth"}},[t._v("earth 3D wind visualization")]),t._v(", which was inspired by "),e("a",{attrs:{href:"http://hint.fm/wind/"}},[t._v("hint.fm/wind")]),t._v(", which is based on the concept of "),e("a",{attrs:{href:"https://natureofcode.com/autonomous-agents/#flow-fields"}},[t._v("flow fields")]),t._v(". To experiment with some of the underlying parameters, turn on controls: ")])},function(){var t=this,e=t._self._c;return e("p",[t._v(" Lawler, JJ, et al. 2013. "),e("a",{attrs:{href:"https://citeseerx.ist.psu.edu/document?repid=rep1&type=pdf&doi=68af63ecff902864920e93168c7d474392f4520a",target:"_blank"}},[t._v("Projected climate-driven faunal movement routes")]),t._v(". Ecology Letters 16(8): 1014-1022. ")])},function(){var t=this,e=t._self._c;return e("p",[t._v(" McGuire, JL, et al. 2016. "),e("a",{attrs:{href:"http://www.pnas.org/content/113/26/7195.abstract",target:"_blank"}},[t._v("Achieving climate connectivity in a fragmented landscape")]),t._v(". Proceedings of the National Academy of Sciences: 113: 7195-7200. ")])},function(){var t=this,e=t._self._c;return e("div",{staticClass:"mapbox-map-container nocursor"},[e("div",{staticClass:"nocursor",attrs:{id:"map"}})])}],s=a("e192"),r=a.n(s);a("ac6d"),a("14d9");function l(t,e){var a=e.VELOCITY_SCALE,i=e.INTENSITY_SCALE_STEP,n=e.MAX_WIND_INTENSITY,o=e.MAX_PARTICLE_AGE,s=e.PARTICLE_LINE_WIDTH,r=e.PARTICLE_MULTIPLIER/100,l=e.FRAME_RATE,c=e.NULL_WIND_VECTOR,m=e.FADE_FILL_STYLE,p=[e.COLOR_RAMP],d=e.COMPOSITE_OPERATION,_=e.COLOR_ALPHA,h=function(t,e,a,i,n,o){var s=1-t,r=1-e,l=s*r,c=t*r,m=s*e,p=t*e,d=a[0]*l+i[0]*c+n[0]*m+o[0]*p,_=a[1]*l+i[1]*c+n[1]*m+o[1]*p;return[d,_,Math.sqrt(d*d+_*_)]},A=function(t,e){var a=t.data,i=e.data;return{header:t.header,data:function(t){return[a[t],i[t]]},interpolate:h}},u=function(t){var e=null,a=null;return t.forEach((function(t){switch(t.header.parameterCategory+","+t.header.parameterNumber){case"2,2":e=t;break;case"2,3":a=t;break}})),A(e,a)},E=function(t,e){var a=u(t),i=a.header,n=i.lo1,o=i.la1,s=i.dx,r=i.dy,l=i.nx,c=i.ny,m=new Date(i.refTime);m.setHours(m.getHours()+i.forecastTime);for(var p=[],d=0,_=Math.floor(l*s)>=360,h=0;h<c;h++){for(var A=[],E=0;E<l;E++,d++)A[E]=a.data(d);_&&A.push(A[0]),p[h]=A}function C(t,e){var i,l=T(t-n,360)/s,c=(o-e)/r,m=Math.floor(l),d=m+1,_=Math.floor(c),h=_+1;if(i=p[_]){var A=i[m],u=i[d];if(L(A)&&L(u)&&(i=p[h])){var E=i[m],C=i[d];if(L(E)&&L(C))return a.interpolate(l-m,c-_,A,u,E,C)}}return null}e({date:m,interpolate:C})},L=function(t){return null!==t&&void 0!==t},T=function(t,e){return t-e*Math.floor(t/e)},C=function(t,e,a,i,n,o,s,r){var l=s[0]*o,c=s[1]*o,m=I(t,e,a,i,n,r);return s[0]=m[0]*l+m[2]*c,s[1]=m[1]*l+m[3]*c,s},I=function(t,e,a,i,n,o){var s=2*Math.PI,r=Math.pow(10,-5.2),l=e<0?r:-r,c=a<0?r:-r,m=O(a,e+l,o),p=O(a+c,e,o),d=Math.cos(a/360*s);return[(m[0]-i)/l/d,(m[1]-n)/l/d,(p[0]-i)/c,(p[1]-n)/c]},N=function(t,e,a){function i(e,a){var i=t[Math.round(e)];return i&&i[Math.round(a)]||c}i.release=function(){t=[]},i.randomize=function(t){var a,n,o=0;do{a=Math.round(Math.floor(Math.random()*e.width)+e.x),n=Math.round(Math.floor(Math.random()*e.height)+e.y)}while(null===i(a,n)[2]&&o++<30);return t.x=a,t.y=n,t},a(e,i)},v=function(t,e,a){var i=t[0],n=t[1],o=Math.round(i[0]),s=Math.max(Math.floor(i[1],0),0),r=Math.min(Math.ceil(n[1],a),a-1);return{x:o,y:s,xMax:e,yMax:r,width:e,height:a}},R=function(t){return t/180*Math.PI},f=function(t){return t/(Math.PI/180)},b=function(t,e,a){var i=a.east-a.west,n=a.width/f(i)*360/(2*Math.PI),o=n/2*Math.log((1+Math.sin(a.south))/(1-Math.sin(a.south))),s=a.height+o,r=(s-e)/n,l=180/Math.PI*(2*Math.atan(Math.exp(r))-Math.PI/2),c=f(a.west)+t/a.width*f(i);return[c,l]},P=function(t){return Math.log(Math.tan(t/2+Math.PI/4))},O=function(t,e,a){var i=P(a.south),n=P(a.north),o=a.width/(a.east-a.west),s=a.height/(n-i),r=P(R(t)),l=(R(e)-a.west)*o,c=(n-r)*s;return[l,c]},g=function(t,e,i,n){var o={},s=a,r=[],l=e.x;function c(a){for(var n=[],l=e.y;l<=e.yMax;l+=2){var c=b(a,l,i);if(c){var m=c[0],p=c[1];if(isFinite(m)){var d=t.interpolate(m,p);d&&(d=C(o,m,p,a,l,s,d,i),n[l+1]=n[l]=d)}}}r[a+1]=r[a]=n}(function t(){var a=Date.now();while(l<e.width)if(c(l),l+=2,Date.now()-a>1e3)return void setTimeout(t,25);N(r,e,n)})()},y=function(e,a){function c(t,e){var a=p;return a.indexFor=function(t){return Math.floor(Math.min(t,e)/e*(a.length-1))},a}for(var h=c(i,n),A=h.map((function(){return[]})),u=Math.round(e.width*e.height*r),E=[],L=0;L<u;L++)E.push(a.randomize({age:Math.floor(Math.random()*o)+0}));function T(){A.forEach((function(t){t.length=0})),E.forEach((function(t){t.age>o&&(a.randomize(t).age=0);var e=t.x,i=t.y,n=a(e,i),s=n[2];if(null===s)t.age=o;else{var r=e+n[0],l=i+n[1];null!==a(r,l)[2]?(t.xt=r,t.yt=l,A[h.indexFor(s)].push(t)):(t.x=r,t.y=l)}t.age+=1}))}var C=t.canvas.getContext("2d",{powerPreference:"high-performance"});function I(){var t=C.globalCompositeOperation;C.globalCompositeOperation=d,C.fillRect(e.x,e.y,e.width,e.height),C.globalCompositeOperation=t,C.globalAlpha=_,A.forEach((function(t,e){t.length>0&&(C.beginPath(),C.strokeStyle=h[e],t.forEach((function(t){C.moveTo(t.x,t.y),C.lineTo(t.xt,t.yt),t.x=t.xt,t.y=t.yt})),C.stroke())}))}C.lineWidth=s,C.fillStyle=m,C.globalAlpha=_,function t(){try{w.timer=setTimeout((function(){requestAnimationFrame(t),T(),I()}),1e3/l)}catch(e){console.error(e)}}()},M=function(e,c,h,A,u){u&&(s=u.particleLineWidth,p=[u.COLOR_RAMP],_=[u.COLOR_ALPHA],a=u.VELOCITY_SCALE,i=u.INTENSITY_SCALE_STEP,n=u.MAX_WIND_INTENSITY,o=u.MAX_PARTICLE_AGE,s=u.PARTICLE_LINE_WIDTH,r=u.PARTICLE_MULTIPLIER,l=u.FRAME_RATE,m=u.FADE_FILL_STYLE,r=u.PARTICLE_MULTIPLIER/100,d=u.COMPOSITE_OPERATION),console.log("width: "+c+" height: "+h);var L={south:R(A[0][1]),north:R(A[1][1]),east:R(A[1][0]),west:R(A[0][0]),width:c,height:h};S(),E(t.data,(function(t){g(t,v(e,c,h),L,(function(t,e){w.field=e,y(t,e)}))}))},S=function(){w.field&&w.field.release(),w.timer&&clearTimeout(w.timer)},w={params:t,start:M,stop:S};return w}window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,50)}}();var c={name:"App",data:function(){return{showCaption:!0,showDat:!1,mapSatelliteOpacity:0,map:{},mapLandColor:"#000000",mapLandOpacity:1,mapWaterColor:"#ffffff",mapWaterOpacity:1,mapLakeColor:"#a3bbc7",mapLakeOpacity:0,mapCountryLineColor:"#ffffff",mapCountryLineWidth:1,mapCountryLineOpacity:1,mapCountryLabels:!0,mapCityLabels:!0,mapRoadsOpacity:0,activeScenario:"scene1",amphibsOn:!0,amphibsColor:"#fcfa47",amphibsActive:{},amphibsActive2:{},birdsOn:!0,birdsColor:"#47d4fc",birdsActive:{},birdsActive2:{},mammalsOn:!0,mammalsColor:"#fc47dc",mammalsActive:{},mammalsActive2:{},titleFontSize:75,zoomWidth:{default:1.5,z2:1.8,z3:1.5,z4:1.5,z5:1,z6:1,z7:.8},compositeOptions:[{name:"destination-over",value:"destination-over"},{name:"destination-atop",value:"destination-atop"},{name:"destination-in",value:"destination-in"},{name:"destination-out",value:"destination-out"},{name:"multiply",value:"multiply"},{name:"hue",value:"hue"}],compositeSelected:"destination-in",default:{zoomWidth:{default:.9,z2:.8,z3:.9,z4:1,z5:.4,z6:.05,z7:.05}},config:{scene1:{amphibs:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:50,PARTICLE_LINE_WIDTH:2.5,PARTICLE_MULTIPLIER:.2,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.7,COLOR_RAMP:"#fcfa47",COLOR_ALPHA:.9,COMPOSITE_OPERATION:"destination-in",spData:"data/perlin8_5_2_direction.json",spName:"amphibs",sceneName:"perlin land + water"},birds:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:25,PARTICLE_LINE_WIDTH:2.5,PARTICLE_MULTIPLIER:.2,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.7,COLOR_RAMP:"#47d4fc",COLOR_ALPHA:.9,COMPOSITE_OPERATION:"destination-in",spData:"data/perlin4_4_1_direction.json",spName:"birds"},mammals:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:25,PARTICLE_LINE_WIDTH:2.5,PARTICLE_MULTIPLIER:.2,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.7,COLOR_RAMP:"#fc47dc",COLOR_ALPHA:.9,COMPOSITE_OPERATION:"destination-in",spData:"data/perlin16_3_4_direction.json",spName:"mammals"}},scene2:{amphibs:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:25,PARTICLE_LINE_WIDTH:2.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.7,COLOR_RAMP:"#fcfa47",COLOR_ALPHA:.9,spData:"data/perlin_8_west.json",spName:"amphibs"},birds:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:25,PARTICLE_LINE_WIDTH:2.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.7,COLOR_RAMP:"#47d4fc",COLOR_ALPHA:.9,spData:"data/perlin_4_west.json",spName:"birds"},mammals:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:25,PARTICLE_LINE_WIDTH:2.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.7,COLOR_RAMP:"#fc47dc",COLOR_ALPHA:.9,spData:"data/perlin_16_west.json",spName:"mammals"}},scene4:{amphibs:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:25,PARTICLE_LINE_WIDTH:2.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.7,COLOR_RAMP:"#fcfa47",COLOR_ALPHA:.9,spData:"data/perlin_8_5_rd_direction.json",spName:"amphibs",sceneName:"perlin land only"},birds:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:25,PARTICLE_LINE_WIDTH:2.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.7,COLOR_RAMP:"#47d4fc",COLOR_ALPHA:.9,spData:"data/perlin4_4_1_r_direction.json",spName:"birds"},mammals:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:25,PARTICLE_LINE_WIDTH:2.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.7,COLOR_RAMP:"#fc47dc",COLOR_ALPHA:.9,spData:"data/perlin16_3_4_m_r_direction.json",spName:"mammals"}},scene5:{amphibs:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:100,PARTICLE_LINE_WIDTH:1.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.98,COLOR_RAMP:"#fcfa47",COLOR_ALPHA:.95,spData:"data/amphibs_mag.json",spName:"amphibs"},birds:{VELOCITY_SCALE:.15,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:100,PARTICLE_LINE_WIDTH:1.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.98,COLOR_RAMP:"#47d4fc",COLOR_ALPHA:.95,spData:"data/birds_direction.json",spName:"birds"},mammals:{VELOCITY_SCALE:.15,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:100,PARTICLE_LINE_WIDTH:1.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.98,COLOR_RAMP:"#fc47dc",COLOR_ALPHA:.95,spData:"data/mammals_mag.json",spName:"mammals"}},scene6:{amphibs:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:100,PARTICLE_LINE_WIDTH:.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.96,COLOR_RAMP:"#fcfa47",COLOR_ALPHA:1,spData:"data/amphibs_mag.json",spName:"amphibs"},birds:{VELOCITY_SCALE:.15,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:100,PARTICLE_LINE_WIDTH:.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.96,COLOR_RAMP:"#47d4fc",COLOR_ALPHA:1,spData:"data/birds_direction.json",spName:"birds"},mammals:{VELOCITY_SCALE:.15,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:100,PARTICLE_LINE_WIDTH:.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.96,COLOR_RAMP:"#fc47dc",COLOR_ALPHA:1,spData:"data/mammals_mag.json",spName:"mammals"}},scene7:{amphibs:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:100,PARTICLE_LINE_WIDTH:1.3,PARTICLE_MULTIPLIER:.4,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.98,COLOR_RAMP:"#fcfa47",COLOR_ALPHA:.95,spData:"data/amphibs_mag.json",spName:"amphibs"},birds:{VELOCITY_SCALE:.15,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:100,PARTICLE_LINE_WIDTH:1.3,PARTICLE_MULTIPLIER:.4,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.98,COLOR_RAMP:"#47d4fc",COLOR_ALPHA:.95,spData:"data/birds_direction.json",spName:"birds"},mammals:{VELOCITY_SCALE:.15,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:100,PARTICLE_LINE_WIDTH:1.3,PARTICLE_MULTIPLIER:.4,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.98,COLOR_RAMP:"#fc47dc",COLOR_ALPHA:.95,spData:"data/mammals_mag.json",spName:"mammals"}}},content:[{step:1,text:"<p>As climate change alters habitats and disrupts ecosystems, where will animals move to survive? And will human development prevent them from getting there?</p> <p>This map shows the average direction mammals, birds, and amphibians need to move to track hospitable climates as they shift across the landscape. &darr;</p>"},{step:2,text:'<h2>How?</h2><p>Researchers from University of Washington and The Nature Conservancy modeled potential habitat for 2954 species using climate change projections and the climatic needs of each species.</p> <p>Using flow models from <a href="https://www.circuitscape.org/" target="_blank">electronic circuit theory</a>, they plotted movement routes for each species, connecting current habitats with their projected locations under climate change.</p>'},{step:3,text:'<h2>What Can We Do?</h2> <p>There are a number of ways that conservationists and land managers can <a href="https://blog.nature.org/science/2016/06/29/species-on-the-move-mapping-barriers-for-wildlife-in-a-warming-world/?utm_source=cgs&utm_medium=alsoin&utm_campaign=migrations" target="_blank">re-build or maintain connectivity</a> to improve speciesâ€™ ability to adapt to warmer temperatures. Removing fencing, adding wildlife overpasses (or underpasses) to major roadways, and better routing of infrastructure like pipelines and powerlines can all help re-connect areas fragmented by human development.</p>'},{step:4,text:"<h2>So...</h2> <p><strong>Q: Does this mean 3000 species will move through my backyard because of climate change?</strong></p><p><strong>A:</strong> No, the researchers used coarse 50 km data, which is good for understanding the big picture view, but not good for understanding local patterns.</p>"},{step:5,text:"<h2>Credits</h2><p>This map was created by <a href='mailto:dmajka@tnc.org' target='_blank'>Dan Majka</a>, who works for The Nature Conservancy's North America Region science team.</p><p>This work would have not been possible without the <a href='https://blog.nature.org/science/2018/04/26/innovation-for-conservation-brad-mcrae-1966-2017/' target='_blank'>pioneering connectivity science of Brad McRae (1966-2017).</p>"},{step:7,text:'<h2>References</h2><p>Lawler, JJ, et al. 2013. <a href="Lawler.2013.EcolLettersClimateRoutes.pdf" target="_blank">Projected climate-driven faunal movement routes</a>. Ecology Letters 16(8): 1014-1022. </p><p>McGuire, JL, et al. 2016. <a href="http://www.pnas.org/content/113/26/7195.abstract" target="_blank">Achieving climate connectivity in a fragmented landscape</a>. Proceedings of the National Academy of Sciences: 113: 7195-7200.</p>'}],activeContentStep:0}},methods:{debounce(t,e=100){let a;return function(...i){clearTimeout(a),a=setTimeout(()=>{t.apply(this,i)},e)}},shortcuts(t){switch(t.srcKey){case"caption":console.log("toggle caption"),this.toggleCaption();break;case"dat":console.log("toggle dat"),this.toggleDat();break}},flyToLocation(t,e){var a={SA:{coords:[-60.28,-11.58],zoom:3.84},NA:{coords:[-94.5,41],zoom:4},West:{coords:[-75,8.3],zoom:2.67},West2:{coords:[-71.12,6.4],zoom:2.41},WestTight:{coords:[-109,44],zoom:8.5},East:{coords:[-78,37],zoom:5},World:{coords:[12.2,17.2],zoom:2}},i=a[e].coords,n=a[e].zoom;console.log("flying to "+e),t.flyTo({center:i,zoom:n,speed:.5,curve:1,essential:!0})},fadeOpacity(t,e,a){var i=this,n=0,o=setInterval((function(){"in"===e?i[t]=n/50:"out"===e&&(i[t]=1-n/50),n++,51===n&&clearInterval(o)}),a/50)},removeDiv(t,e){setTimeout((function(){document.getElementById(t).remove()}),e)},createMap(){var t=this;r.a.accessToken="pk.eyJ1IjoiZG1hamthIiwiYSI6ImNrcmJpMjE2bTR0ZmwydnRmNm4xMG5yMGMifQ.XtPOIE4pFFUEIDcXc8W0oQ";const e=new r.a.Map({container:"map",style:"mapbox://styles/dmajka/ck7c4399204jm1iqrfcvlxf42",center:[-78,19],zoom:3,attributionControl:!0,hash:!0});return e.dragRotate.disable(),e.touchZoomRotate.disableRotation(),e.keyboard.disableRotation(),e.addControl(new r.a.NavigationControl({showCompass:!1}),"top-left"),e.on("load",(function(){e.setPaintProperty("lakes-7oy7ga","fill-opacity",0),e.setPaintProperty("americas-mask2-c5phmk","fill-opacity",1)})),t.map=e,e},calculateParticleWidth(){var t=this.map.getZoom(),e=this,a=1.5;return a=t<2?e.zoomWidth.z2:t<3?e.zoomWidth.z3:t<4?e.zoomWidth.z4:t<5?e.zoomWidth.z5:t<6?e.zoomWidth.z6:e.zoomWidth.z7,a},buildFlow(t,e,a,i,n){fetch(a.spData).then(t=>t.json()).then(o=>{var s,r,c=this,m=document.getElementById("windContainer"+e),p=document.createElement("canvas");function d(t,e,a,i){var n=document.getElementById(a),o=_(t),{north:s,south:l,west:c,east:m}=o,p=n.getContext("2d");p.scale(devicePixelRatio,devicePixelRatio);try{n.style.display="none"}catch{console.log("oops")}e&&e.stop(),r&&clearTimeout(r),r=setTimeout((function(){n.style.display="initial",n.width=o.width,n.height=o.height;var a=t.getContainer();const r={x:a.clientWidth,y:a.clientHeight};e.start([[0,0],[r.x,r.y]],r.x,r.y,[[c,l],[m,s]],i)}),50)}function _(t){var e=t.getCanvas(),a=t.getBounds(),i={width:e.width,height:e.height,north:a.getNorth(),south:a.getSouth(),west:a.getWest(),east:a.getEast(),zoomLevel:t.getZoom()};return i}p.id=e,p.className="flowLayer",p.classList.add(...n),m.appendChild(p),s=new l({canvas:document.getElementById(e),data:o},a),d(t,s,e,this[e+i]),c.map.on("resize",()=>{d(t,s,e,this[e+i])}),c.map.on("move",()=>{d(t,s,e,this[e+i])}),c.map.on("zoom",()=>{d(t,s,e,this[e+i])})})},toggleCaption(){console.log("toggle caption");let t=this.showCaption;this.showCaption=!t},toggleDat(){console.log("toggle Dat");let t=this.showDat;this.showDat=!t},loadFlowLayers(){var t=this;this.amphibsActive=this.config.scene5.amphibs,this.birdsActive=this.config.scene5.birds,this.mammalsActive=this.config.scene5.mammals;var e=this.amphibsActiveWindy,a=this.birdsActiveWindy,i=this.mammalsActiveWindy;this.fadeOpacity("mapCountryLineOpacity","in",10),setTimeout((function(){t.mapCountryLabels=!0}),10),this.buildFlow(t.map,"birds",a,"ActiveWindy",[]),this.buildFlow(t.map,"mammals",i,"ActiveWindy",[]),this.buildFlow(t.map,"amphibs",e,"ActiveWindy",[])},nextContent(){this.activeContentStep=this.activeContentStep+1},previousContent(){this.activeContentStep=this.activeContentStep-1}},mounted:function(){this.createMap(),this.loadFlowLayers()},watch:{mapCountryLabels:{handler(){this.map.on("load",()=>{var t=this.mapCountryLabels;let e=t?"visible":"none";this.map.setLayoutProperty("country-label-lg","visibility",e)})}},mapCityLabels:{handler(){var t=this.mapCityLabels;let e=t?"visible":"none";this.map.setLayoutProperty("place-city-lg-n","visibility",e),this.map.setLayoutProperty("place-city-lg-s","visibility",e)}},mapSatelliteOpacity:{handler(){let t=this.mapSatelliteOpacity;this.map.setPaintProperty("mapbox-satellite","raster-opacity",t)}},mapCountryLineWidth:{handler(){let t=this.mapCountryLineWidth;this.map.setPaintProperty("admin-2-boundaries","line-width",t)}},mapCountryLineOpacity:{handler(){let t=this.mapCountryLineOpacity;this.map.setPaintProperty("admin-2-boundaries","line-opacity",t),this.map.setPaintProperty("admin-2-boundaries-bg","line-opacity",t)}},mapRoadsOpacity:{handler(){let t=this.mapRoadsOpacity;this.map.setPaintProperty("major-roads","line-opacity",t)}},mapLandColor:{handler(){let t=this.mapLandColor;this.map.setPaintProperty("background","background-color",t)}},mapLandOpacity:{handler(){let t=this.mapLandOpacity;this.map.setPaintProperty("background","background-opacity",t)}},mapLakeColor:{handler(){let t=this.mapLakeColor;this.map.setPaintProperty("lakes-7oy7ga","fill-color",t)}},mapLakeOpacity:{handler(){let t=this.mapLakeOpacity;this.map.setPaintProperty("lakes-7oy7ga","fill-opacity",t)}},mapWaterColor:{handler(){let t=this.mapWaterColor;this.map.setPaintProperty("water","fill-color",t)}},mapWaterOpacity:{handler(){let t=this.mapWaterOpacity;this.map.setPaintProperty("water","fill-opacity",t)}},compositeSelected:{deep:!0,handler(){let t=this.map.getZoom();this.map.zoomTo(t)}},amphibsActive:{deep:!0,handler(){let t=this.map.getZoom();this.map.zoomTo(t)}},amphibsColor:{handler(){let t=this.map.getZoom();this.map.zoomTo(t)}},birdsActive:{deep:!0,handler(){let t=this.map.getZoom();this.map.zoomTo(t)}},birdsColor:{handler(){let t=this.map.getZoom();this.map.zoomTo(t)}},mammalsActive:{deep:!0,handler(){let t=this.map.getZoom();this.map.zoomTo(t)}},mammalsColor:{handler(){let t=this.map.getZoom();this.map.zoomTo(t)}}},computed:{activeContent(){return this.content[this.activeContentStep].text},amphibsActiveWindy(){let t=JSON.parse(JSON.stringify(this.amphibsActive));var e=this.amphibsColor;return t.FADE_FILL_STYLE="rgba(0, 0, 0, "+t.FADE_TRANSPARENCY+")",t.COLOR_RAMP=(" "+e).slice(1),t.COMPOSITE_OPERATION=this.compositeSelected,t.PARTICLE_LINE_WIDTH=this.calculateParticleWidth(),t},birdsActiveWindy(){let t=JSON.parse(JSON.stringify(this.birdsActive));var e=this.birdsColor;return t.FADE_FILL_STYLE="rgba(0, 0, 0, "+t.FADE_TRANSPARENCY+")",t.COLOR_RAMP=(" "+e).slice(1),t.COMPOSITE_OPERATION=this.compositeSelected,t.PARTICLE_LINE_WIDTH=this.calculateParticleWidth(),t},mammalsActiveWindy(){let t=JSON.parse(JSON.stringify(this.mammalsActive));var e=this.mammalsColor;return t.FADE_FILL_STYLE="rgba(0, 0, 0, "+t.FADE_TRANSPARENCY+")",t.COLOR_RAMP=(" "+e).slice(1),t.COMPOSITE_OPERATION=this.compositeSelected,t.PARTICLE_LINE_WIDTH=this.calculateParticleWidth(),t}}},m=c,p=(a("344e"),a("2877")),d=Object(p["a"])(m,n,o,!1,null,null,null),_=d.exports,h=a("2247"),A=a.n(h);i["a"].config.productionTip=!1,i["a"].use(a("3717")),i["a"].use(A.a),new i["a"]({render:t=>t(_)}).$mount("#app")},"907b":function(t,e,a){}});
//# sourceMappingURL=app.11ff5063.js.map