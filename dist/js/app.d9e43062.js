(function(t){function a(a){for(var i,s,r=a[0],l=a[1],c=a[2],d=0,_=[];d<r.length;d++)s=r[d],Object.prototype.hasOwnProperty.call(n,s)&&n[s]&&_.push(n[s][0]),n[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);m&&m(a);while(_.length)_.shift()();return o.push.apply(o,c||[]),e()}function e(){for(var t,a=0;a<o.length;a++){for(var e=o[a],i=!0,r=1;r<e.length;r++){var l=e[r];0!==n[l]&&(i=!1)}i&&(o.splice(a--,1),t=s(s.s=e[0]))}return t}var i={},n={app:0},o=[];function s(a){if(i[a])return i[a].exports;var e=i[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,s),e.l=!0,e.exports}s.m=t,s.c=i,s.d=function(t,a,e){s.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,a){if(1&a&&(t=s(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(s.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var i in t)s.d(e,i,function(a){return t[a]}.bind(null,i));return e},s.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(a,"a",a),a},s.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=a,r=r.slice();for(var c=0;c<r.length;c++)a(r[c]);var m=l;o.push([0,"chunk-vendors"]),e()})({0:function(t,a,e){t.exports=e("56d7")},"0653":function(t,a,e){"use strict";e("8fc2")},"56d7":function(t,a,e){"use strict";e.r(a);var i=e("2b0e"),n=function(){var t=this,a=t._self._c;return a("div",{directives:[{name:"shortkey",rawName:"v-shortkey",value:{caption:["ctrl","c"],dat:["ctrl","u"]},expression:"{\n    caption: ['ctrl', 'c'],\n    dat: ['ctrl', 'u'],\n  }"}],staticClass:"nocursor",attrs:{id:"app"},on:{shortkey:t.shortcuts}},[a("keep-alive",[t.showDat?a("div",[a("dat-gui",{staticClass:"dat-gui-ui",attrs:{closeText:"Close controls",openText:"Open controls",closePosition:"bottom"}},[a("dat-folder",{attrs:{label:"Map Properties"}},[a("dat-number",{attrs:{min:0,max:4,step:.1,label:"Country Line Width"},model:{value:t.mapCountryLineWidth,callback:function(a){t.mapCountryLineWidth=a},expression:"mapCountryLineWidth"}}),a("dat-number",{attrs:{min:0,max:1,step:.01,label:"Country Line Opacity"},model:{value:t.mapCountryLineOpacity,callback:function(a){t.mapCountryLineOpacity=a},expression:"mapCountryLineOpacity"}}),a("dat-color",{attrs:{label:"Land Color"},model:{value:t.mapLandColor,callback:function(a){t.mapLandColor=a},expression:"mapLandColor"}}),a("dat-number",{attrs:{min:0,max:1,step:.005,label:"Satellite Opacity"},model:{value:t.mapSatelliteOpacity,callback:function(a){t.mapSatelliteOpacity=a},expression:"mapSatelliteOpacity"}}),a("dat-select",{attrs:{items:t.compositeOptions,label:"Composite Operation"},model:{value:t.compositeSelected,callback:function(a){t.compositeSelected=a},expression:"compositeSelected"}})],1),a("dat-folder",{attrs:{label:"Birds"}},[a("dat-boolean",{attrs:{label:"Display Layer"},model:{value:t.birdsOn,callback:function(a){t.birdsOn=a},expression:"birdsOn"}}),a("dat-color",{attrs:{label:"Birds Color"},model:{value:t.birdsColor,callback:function(a){t.birdsColor=a},expression:"birdsColor"}}),a("dat-number",{attrs:{min:0,max:1,step:.01,label:"Velocity Scale"},model:{value:t.birdsActive.VELOCITY_SCALE,callback:function(a){t.$set(t.birdsActive,"VELOCITY_SCALE",a)},expression:"birdsActive.VELOCITY_SCALE"}}),a("dat-number",{attrs:{min:0,max:200,step:1,label:"Max Particle Age"},model:{value:t.birdsActive.MAX_PARTICLE_AGE,callback:function(a){t.$set(t.birdsActive,"MAX_PARTICLE_AGE",a)},expression:"birdsActive.MAX_PARTICLE_AGE"}}),a("dat-number",{attrs:{min:0,max:2,step:.05,label:"Particle Multiplier"},model:{value:t.birdsActive.PARTICLE_MULTIPLIER,callback:function(a){t.$set(t.birdsActive,"PARTICLE_MULTIPLIER",a)},expression:"birdsActive.PARTICLE_MULTIPLIER"}}),a("dat-number",{attrs:{min:0,max:1,step:.01,label:"Fade Transparency"},model:{value:t.birdsActive.FADE_TRANSPARENCY,callback:function(a){t.$set(t.birdsActive,"FADE_TRANSPARENCY",a)},expression:"birdsActive.FADE_TRANSPARENCY"}}),a("dat-number",{attrs:{min:0,max:1,step:.01,label:"Color Alpha"},model:{value:t.birdsActive.COLOR_ALPHA,callback:function(a){t.$set(t.birdsActive,"COLOR_ALPHA",a)},expression:"birdsActive.COLOR_ALPHA"}})],1),a("dat-folder",{attrs:{label:"Mammals"}},[a("dat-boolean",{attrs:{label:"Display Layer"},model:{value:t.mammalsOn,callback:function(a){t.mammalsOn=a},expression:"mammalsOn"}}),a("dat-color",{attrs:{label:"Mammals Color"},model:{value:t.mammalsColor,callback:function(a){t.mammalsColor=a},expression:"mammalsColor"}}),a("dat-number",{attrs:{min:0,max:1,step:.01,label:"Velocity Scale"},model:{value:t.mammalsActive.VELOCITY_SCALE,callback:function(a){t.$set(t.mammalsActive,"VELOCITY_SCALE",a)},expression:"mammalsActive.VELOCITY_SCALE"}}),a("dat-number",{attrs:{min:0,max:200,step:1,label:"Max Particle Age"},model:{value:t.mammalsActive.MAX_PARTICLE_AGE,callback:function(a){t.$set(t.mammalsActive,"MAX_PARTICLE_AGE",a)},expression:"mammalsActive.MAX_PARTICLE_AGE"}}),a("dat-number",{attrs:{min:0,max:2,step:.05,label:"Particle Multiplier"},model:{value:t.mammalsActive.PARTICLE_MULTIPLIER,callback:function(a){t.$set(t.mammalsActive,"PARTICLE_MULTIPLIER",a)},expression:"mammalsActive.PARTICLE_MULTIPLIER"}}),a("dat-number",{attrs:{min:0,max:1,step:.01,label:"Fade Transparency"},model:{value:t.mammalsActive.FADE_TRANSPARENCY,callback:function(a){t.$set(t.mammalsActive,"FADE_TRANSPARENCY",a)},expression:"mammalsActive.FADE_TRANSPARENCY"}}),a("dat-number",{attrs:{min:0,max:1,step:.01,label:"Color Alpha"},model:{value:t.mammalsActive.COLOR_ALPHA,callback:function(a){t.$set(t.mammalsActive,"COLOR_ALPHA",a)},expression:"mammalsActive.COLOR_ALPHA"}})],1),a("dat-folder",{attrs:{label:"Amphibians"}},[a("dat-boolean",{attrs:{label:"Display Layer"},model:{value:t.amphibsOn,callback:function(a){t.amphibsOn=a},expression:"amphibsOn"}}),a("dat-color",{attrs:{label:"Amphibs Color"},model:{value:t.amphibsColor,callback:function(a){t.amphibsColor=a},expression:"amphibsColor"}}),a("dat-number",{attrs:{min:0,max:1,step:.01,label:"Velocity Scale"},model:{value:t.amphibsActive.VELOCITY_SCALE,callback:function(a){t.$set(t.amphibsActive,"VELOCITY_SCALE",a)},expression:"amphibsActive.VELOCITY_SCALE"}}),a("dat-number",{attrs:{min:0,max:200,step:1,label:"Max Particle Age"},model:{value:t.amphibsActive.MAX_PARTICLE_AGE,callback:function(a){t.$set(t.amphibsActive,"MAX_PARTICLE_AGE",a)},expression:"amphibsActive.MAX_PARTICLE_AGE"}}),a("dat-number",{attrs:{min:0,max:2,step:.05,label:"Particle Multiplier"},model:{value:t.amphibsActive.PARTICLE_MULTIPLIER,callback:function(a){t.$set(t.amphibsActive,"PARTICLE_MULTIPLIER",a)},expression:"amphibsActive.PARTICLE_MULTIPLIER"}}),a("dat-number",{attrs:{min:0,max:1,step:.01,label:"Fade Transparency"},model:{value:t.amphibsActive.FADE_TRANSPARENCY,callback:function(a){t.$set(t.amphibsActive,"FADE_TRANSPARENCY",a)},expression:"amphibsActive.FADE_TRANSPARENCY"}}),a("dat-number",{attrs:{min:0,max:1,step:.01,label:"Color Alpha"},model:{value:t.amphibsActive.COLOR_ALPHA,callback:function(a){t.$set(t.amphibsActive,"COLOR_ALPHA",a)},expression:"amphibsActive.COLOR_ALPHA"}})],1)],1)],1):t._e()]),t.showCaption?a("div",{attrs:{id:"viz-meta"}},[t._m(0),a("div",{attrs:{id:"legend-inline"}},[t.birdsOn?a("div",{staticClass:"legend-item-inline"},[a("div",{staticClass:"legend-color",style:{"background-color":t.birdsColor}}),a("div",{staticClass:"legend-text"},[t._v("Birds")])]):t._e(),t.mammalsOn?a("div",{staticClass:"legend-item-inline"},[a("div",{staticClass:"legend-color",style:{"background-color":t.mammalsColor}}),a("div",{staticClass:"legend-text"},[t._v("Mammals")])]):t._e(),t.amphibsOn?a("div",{staticClass:"legend-item-inline"},[a("div",{staticClass:"legend-color",style:{"background-color":t.amphibsColor}}),a("div",{staticClass:"legend-text"},[t._v("Amphibians")])]):t._e()]),a("div",[a("p",[t._v(" As climate change alters habitats and disrupts ecosystems, where will animals move to survive? And will human development prevent them from getting there? ")]),a("p",[t._v(" This map shows the average direction mammals, birds, and amphibians need to move to track hospitable climates as they shift across the landscape. ↓ ")]),a("h2",[t._v("How?")]),a("p",[t._v(" Researchers from University of Washington and The Nature Conservancy modeled potential habitat for 2954 species using climate change projections and the climatic needs of each species. ")]),t._m(1),a("h2",[t._v("What Can We Do?")]),t._m(2),a("h2",[t._v("So...")]),t._m(3),t._m(4),a("h2",[t._v("Credits")]),t._m(5),t._m(6),a("h2",[t._v("Bonus Fun!")]),t._m(7),a("div",{attrs:{id:"switch-container"}},[a("label",{staticClass:"switch"},[a("input",{attrs:{type:"checkbox"},on:{click:t.toggleDat}}),a("span",{staticClass:"slider round"})]),a("span",{staticClass:"switch-label"},[t._v("Visualization Controls")])]),a("h2",[t._v("References")]),t._m(8),t._m(9)]),a("img",{staticClass:"tnc-logo",attrs:{src:"tnc-logo-light.svg",alt:"The Nature Conservancy"}})]):t._e(),a("div",{staticClass:"wind-map-container nocursor",class:{hide:!t.birdsOn},staticStyle:{display:"initial"},attrs:{id:"windContainerbirds"}}),a("div",{staticClass:"wind-map-container nocursor",class:{hide:!t.mammalsOn},staticStyle:{display:"initial"},attrs:{id:"windContainermammals"}}),a("div",{staticClass:"wind-map-container nocursor",class:{hide:!t.amphibsOn},staticStyle:{display:"initial"},attrs:{id:"windContaineramphibs"}}),t._m(10)],1)},o=[function(){var t=this,a=t._self._c;return a("h1",[t._v("Migrations "),a("br",{staticClass:"title-break"}),t._v("In Motion")])},function(){var t=this,a=t._self._c;return a("p",[t._v(" Using flow models from "),a("a",{attrs:{href:"https://www.circuitscape.org/",target:"_blank"}},[t._v("electronic circuit theory")]),t._v(", they plotted movement routes for each species, connecting current habitats with their projected locations under climate change. ")])},function(){var t=this,a=t._self._c;return a("p",[t._v(" There are a number of ways that conservationists and land managers can "),a("a",{attrs:{href:"https://blog.nature.org/science/2016/06/29/species-on-the-move-mapping-barriers-for-wildlife-in-a-warming-world/?utm_source=cgs&utm_medium=alsoin&utm_campaign=migrations",target:"_blank"}},[t._v("re-build or maintain connectivity")]),t._v(" to improve species’ ability to adapt to warmer temperatures. Removing fencing, adding wildlife overpasses (or underpasses) to major roadways, and better routing of infrastructure like pipelines and powerlines can all help re-connect areas fragmented by human development. ")])},function(){var t=this,a=t._self._c;return a("p",[a("strong",[t._v("Q: Does this mean 3000 species will move through my backyard because of climate change?")])])},function(){var t=this,a=t._self._c;return a("p",[a("strong",[t._v("A:")]),t._v(" No, the researchers used coarse 50 km data, which is good for understanding the big picture view, but not good for understanding local patterns. ")])},function(){var t=this,a=t._self._c;return a("p",[t._v(" This map was created by "),a("a",{attrs:{href:"mailto:dmajka@tnc.org",target:"_blank"}},[t._v("Dan Majka")]),t._v(", who works for The Nature Conservancy's North America Region science team. ")])},function(){var t=this,a=t._self._c;return a("p",[t._v(" This work would have not been possible without the "),a("a",{attrs:{href:"https://blog.nature.org/science/2018/04/26/innovation-for-conservation-brad-mcrae-1966-2017/",target:"_blank"}},[t._v("pioneering connectivity science of Brad McRae (1966-2017)")]),t._v(". ")])},function(){var t=this,a=t._self._c;return a("p",[t._v(" The visualization uses code adapted from "),a("a",{attrs:{href:"https://github.com/FreshyLabs/windy"}},[t._v("windy-js")]),t._v(", which adapated code from the "),a("a",{attrs:{href:"https://github.com/cambecc/earth"}},[t._v("earth 3D wind visualization")]),t._v(", which was inspired by "),a("a",{attrs:{href:"http://hint.fm/wind/"}},[t._v("hint.fm/wind")]),t._v(", which is based on the concept of "),a("a",{attrs:{href:"https://natureofcode.com/autonomous-agents/#flow-fields"}},[t._v("flow fields")]),t._v(". To experiment with some of the underlying parameters, turn on controls: ")])},function(){var t=this,a=t._self._c;return a("p",[t._v(" Lawler, JJ, et al. 2013. "),a("a",{attrs:{href:"https://citeseerx.ist.psu.edu/document?repid=rep1&type=pdf&doi=68af63ecff902864920e93168c7d474392f4520a",target:"_blank"}},[t._v("Projected climate-driven faunal movement routes")]),t._v(". Ecology Letters 16(8): 1014-1022. ")])},function(){var t=this,a=t._self._c;return a("p",[t._v(" McGuire, JL, et al. 2016. "),a("a",{attrs:{href:"http://www.pnas.org/content/113/26/7195.abstract",target:"_blank"}},[t._v("Achieving climate connectivity in a fragmented landscape")]),t._v(". Proceedings of the National Academy of Sciences: 113: 7195-7200. ")])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"mapbox-map-container nocursor"},[a("div",{staticClass:"nocursor",attrs:{id:"map"}})])}],s=e("e192"),r=e.n(s);e("ac6d"),e("14d9");function l(t,a){var e=a.VELOCITY_SCALE,i=a.INTENSITY_SCALE_STEP,n=a.MAX_WIND_INTENSITY,o=a.MAX_PARTICLE_AGE,s=a.PARTICLE_LINE_WIDTH,r=a.PARTICLE_MULTIPLIER/100,l=a.FRAME_RATE,c=a.NULL_WIND_VECTOR,m=a.FADE_FILL_STYLE,d=[a.COLOR_RAMP],_=a.COMPOSITE_OPERATION,p=a.COLOR_ALPHA,A=function(t,a,e,i,n,o){var s=1-t,r=1-a,l=s*r,c=t*r,m=s*a,d=t*a,_=e[0]*l+i[0]*c+n[0]*m+o[0]*d,p=e[1]*l+i[1]*c+n[1]*m+o[1]*d;return[_,p,Math.sqrt(_*_+p*p)]},h=function(t,a){var e=t.data,i=a.data;return{header:t.header,data:function(t){return[e[t],i[t]]},interpolate:A}},E=function(t){var a=null,e=null;return t.forEach((function(t){switch(t.header.parameterCategory+","+t.header.parameterNumber){case"2,2":a=t;break;case"2,3":e=t;break}})),h(a,e)},u=function(t,a){var e=E(t),i=e.header,n=i.lo1,o=i.la1,s=i.dx,r=i.dy,l=i.nx,c=i.ny,m=new Date(i.refTime);m.setHours(m.getHours()+i.forecastTime);for(var d=[],_=0,p=Math.floor(l*s)>=360,A=0;A<c;A++){for(var h=[],u=0;u<l;u++,_++)h[u]=e.data(_);p&&h.push(h[0]),d[A]=h}function C(t,a){var i,l=T(t-n,360)/s,c=(o-a)/r,m=Math.floor(l),_=m+1,p=Math.floor(c),A=p+1;if(i=d[p]){var h=i[m],E=i[_];if(L(h)&&L(E)&&(i=d[A])){var u=i[m],C=i[_];if(L(u)&&L(C))return e.interpolate(l-m,c-p,h,E,u,C)}}return null}a({date:m,interpolate:C})},L=function(t){return null!==t&&void 0!==t},T=function(t,a){return t-a*Math.floor(t/a)},C=function(t,a,e,i,n,o,s,r){var l=s[0]*o,c=s[1]*o,m=I(t,a,e,i,n,r);return s[0]=m[0]*l+m[2]*c,s[1]=m[1]*l+m[3]*c,s},I=function(t,a,e,i,n,o){var s=2*Math.PI,r=Math.pow(10,-5.2),l=a<0?r:-r,c=e<0?r:-r,m=O(e,a+l,o),d=O(e+c,a,o),_=Math.cos(e/360*s);return[(m[0]-i)/l/_,(m[1]-n)/l/_,(d[0]-i)/c,(d[1]-n)/c]},N=function(t,a,e){function i(a,e){var i=t[Math.round(a)];return i&&i[Math.round(e)]||c}i.release=function(){t=[]},i.randomize=function(t){var e,n,o=0;do{e=Math.round(Math.floor(Math.random()*a.width)+a.x),n=Math.round(Math.floor(Math.random()*a.height)+a.y)}while(null===i(e,n)[2]&&o++<30);return t.x=e,t.y=n,t},e(a,i)},R=function(t,a,e){var i=t[0],n=t[1],o=Math.round(i[0]),s=Math.max(Math.floor(i[1],0),0),r=Math.min(Math.ceil(n[1],e),e-1);return{x:o,y:s,xMax:a,yMax:r,width:a,height:e}},v=function(t){return t/180*Math.PI},b=function(t){return t/(Math.PI/180)},f=function(t,a,e){var i=e.east-e.west,n=e.width/b(i)*360/(2*Math.PI),o=n/2*Math.log((1+Math.sin(e.south))/(1-Math.sin(e.south))),s=e.height+o,r=(s-a)/n,l=180/Math.PI*(2*Math.atan(Math.exp(r))-Math.PI/2),c=b(e.west)+t/e.width*b(i);return[c,l]},P=function(t){return Math.log(Math.tan(t/2+Math.PI/4))},O=function(t,a,e){var i=P(e.south),n=P(e.north),o=e.width/(e.east-e.west),s=e.height/(n-i),r=P(v(t)),l=(v(a)-e.west)*o,c=(n-r)*s;return[l,c]},y=function(t,a,i,n){var o={},s=e,r=[],l=a.x;function c(e){for(var n=[],l=a.y;l<=a.yMax;l+=2){var c=f(e,l,i);if(c){var m=c[0],d=c[1];if(isFinite(m)){var _=t.interpolate(m,d);_&&(_=C(o,m,d,e,l,s,_,i),n[l+1]=n[l]=_)}}}r[e+1]=r[e]=n}(function t(){var e=Date.now();while(l<a.width)if(c(l),l+=2,Date.now()-e>1e3)return void setTimeout(t,25);N(r,a,n)})()},g=function(a,e){function c(t,a){var e=d;return e.indexFor=function(t){return Math.floor(Math.min(t,a)/a*(e.length-1))},e}for(var A=c(i,n),h=A.map((function(){return[]})),E=Math.round(a.width*a.height*r),u=[],L=0;L<E;L++)u.push(e.randomize({age:Math.floor(Math.random()*o)+0}));function T(){h.forEach((function(t){t.length=0})),u.forEach((function(t){t.age>o&&(e.randomize(t).age=0);var a=t.x,i=t.y,n=e(a,i),s=n[2];if(null===s)t.age=o;else{var r=a+n[0],l=i+n[1];null!==e(r,l)[2]?(t.xt=r,t.yt=l,h[A.indexFor(s)].push(t)):(t.x=r,t.y=l)}t.age+=1}))}var C=t.canvas.getContext("2d",{powerPreference:"high-performance"});function I(){var t=C.globalCompositeOperation;C.globalCompositeOperation=_,C.fillRect(a.x,a.y,a.width,a.height),C.globalCompositeOperation=t,C.globalAlpha=p,h.forEach((function(t,a){t.length>0&&(C.beginPath(),C.strokeStyle=A[a],t.forEach((function(t){C.moveTo(t.x,t.y),C.lineTo(t.xt,t.yt),t.x=t.xt,t.y=t.yt})),C.stroke())}))}C.lineWidth=s,C.fillStyle=m,C.globalAlpha=p,function t(){try{w.timer=setTimeout((function(){requestAnimationFrame(t),T(),I()}),1e3/l)}catch(a){console.error(a)}}()},S=function(a,c,A,h,E){E&&(s=E.particleLineWidth,d=[E.COLOR_RAMP],p=[E.COLOR_ALPHA],e=E.VELOCITY_SCALE,i=E.INTENSITY_SCALE_STEP,n=E.MAX_WIND_INTENSITY,o=E.MAX_PARTICLE_AGE,s=E.PARTICLE_LINE_WIDTH,r=E.PARTICLE_MULTIPLIER,l=E.FRAME_RATE,m=E.FADE_FILL_STYLE,r=E.PARTICLE_MULTIPLIER/100,_=E.COMPOSITE_OPERATION),console.log("width: "+c+" height: "+A);var L={south:v(h[0][1]),north:v(h[1][1]),east:v(h[1][0]),west:v(h[0][0]),width:c,height:A};M(),u(t.data,(function(t){y(t,R(a,c,A),L,(function(t,a){w.field=a,g(t,a)}))}))},M=function(){w.field&&w.field.release(),w.timer&&clearTimeout(w.timer)},w={params:t,start:S,stop:M};return w}window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,50)}}();var c={name:"App",data:function(){return{showCaption:!0,showDat:!1,mapSatelliteOpacity:0,map:{},mapLandColor:"#000000",mapLandOpacity:1,mapWaterColor:"#ffffff",mapWaterOpacity:1,mapLakeColor:"#a3bbc7",mapLakeOpacity:0,mapCountryLineColor:"#ffffff",mapCountryLineWidth:1,mapCountryLineOpacity:1,mapCountryLabels:!0,mapCityLabels:!0,mapRoadsOpacity:0,activeScenario:"scene1",amphibsOn:!0,amphibsColor:"#fcfa47",amphibsActive:{},amphibsActive2:{},birdsOn:!0,birdsColor:"#47d4fc",birdsActive:{},birdsActive2:{},mammalsOn:!0,mammalsColor:"#fc47dc",mammalsActive:{},mammalsActive2:{},titleFontSize:75,zoomWidth:{default:1.5,z2:1.8,z3:1.5,z4:1.5,z5:1,z6:1,z7:.8},compositeOptions:[{name:"destination-over",value:"destination-over"},{name:"destination-atop",value:"destination-atop"},{name:"destination-in",value:"destination-in"},{name:"destination-out",value:"destination-out"},{name:"multiply",value:"multiply"},{name:"hue",value:"hue"}],compositeSelected:"destination-in",default:{zoomWidth:{default:.9,z2:.8,z3:.9,z4:1,z5:.4,z6:.05,z7:.05}},config:{scene1:{amphibs:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:50,PARTICLE_LINE_WIDTH:2.5,PARTICLE_MULTIPLIER:.2,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.7,COLOR_RAMP:"#fcfa47",COLOR_ALPHA:.9,COMPOSITE_OPERATION:"destination-in",spData:"data/perlin8_5_2_direction.json",spName:"amphibs",sceneName:"perlin land + water"},birds:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:25,PARTICLE_LINE_WIDTH:2.5,PARTICLE_MULTIPLIER:.2,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.7,COLOR_RAMP:"#47d4fc",COLOR_ALPHA:.9,COMPOSITE_OPERATION:"destination-in",spData:"data/perlin4_4_1_direction.json",spName:"birds"},mammals:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:25,PARTICLE_LINE_WIDTH:2.5,PARTICLE_MULTIPLIER:.2,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.7,COLOR_RAMP:"#fc47dc",COLOR_ALPHA:.9,COMPOSITE_OPERATION:"destination-in",spData:"data/perlin16_3_4_direction.json",spName:"mammals"}},scene2:{amphibs:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:25,PARTICLE_LINE_WIDTH:2.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.7,COLOR_RAMP:"#fcfa47",COLOR_ALPHA:.9,spData:"data/perlin_8_west.json",spName:"amphibs"},birds:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:25,PARTICLE_LINE_WIDTH:2.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.7,COLOR_RAMP:"#47d4fc",COLOR_ALPHA:.9,spData:"data/perlin_4_west.json",spName:"birds"},mammals:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:25,PARTICLE_LINE_WIDTH:2.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.7,COLOR_RAMP:"#fc47dc",COLOR_ALPHA:.9,spData:"data/perlin_16_west.json",spName:"mammals"}},scene4:{amphibs:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:25,PARTICLE_LINE_WIDTH:2.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.7,COLOR_RAMP:"#fcfa47",COLOR_ALPHA:.9,spData:"data/perlin_8_5_rd_direction.json",spName:"amphibs",sceneName:"perlin land only"},birds:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:25,PARTICLE_LINE_WIDTH:2.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.7,COLOR_RAMP:"#47d4fc",COLOR_ALPHA:.9,spData:"data/perlin4_4_1_r_direction.json",spName:"birds"},mammals:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:25,PARTICLE_LINE_WIDTH:2.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.7,COLOR_RAMP:"#fc47dc",COLOR_ALPHA:.9,spData:"data/perlin16_3_4_m_r_direction.json",spName:"mammals"}},scene5:{amphibs:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:100,PARTICLE_LINE_WIDTH:1.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.98,COLOR_RAMP:"#fcfa47",COLOR_ALPHA:.95,spData:"data/amphibs_mag.json",spName:"amphibs"},birds:{VELOCITY_SCALE:.15,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:100,PARTICLE_LINE_WIDTH:1.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.98,COLOR_RAMP:"#47d4fc",COLOR_ALPHA:.95,spData:"data/birds_direction.json",spName:"birds"},mammals:{VELOCITY_SCALE:.15,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:100,PARTICLE_LINE_WIDTH:1.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.98,COLOR_RAMP:"#fc47dc",COLOR_ALPHA:.95,spData:"data/mammals_mag.json",spName:"mammals"}},scene6:{amphibs:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:100,PARTICLE_LINE_WIDTH:.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.96,COLOR_RAMP:"#fcfa47",COLOR_ALPHA:1,spData:"data/amphibs_mag.json",spName:"amphibs"},birds:{VELOCITY_SCALE:.15,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:100,PARTICLE_LINE_WIDTH:.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.96,COLOR_RAMP:"#47d4fc",COLOR_ALPHA:1,spData:"data/birds_direction.json",spName:"birds"},mammals:{VELOCITY_SCALE:.15,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:100,PARTICLE_LINE_WIDTH:.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.96,COLOR_RAMP:"#fc47dc",COLOR_ALPHA:1,spData:"data/mammals_mag.json",spName:"mammals"}},scene7:{amphibs:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:100,PARTICLE_LINE_WIDTH:1.3,PARTICLE_MULTIPLIER:.4,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.98,COLOR_RAMP:"#fcfa47",COLOR_ALPHA:.95,spData:"data/amphibs_mag.json",spName:"amphibs"},birds:{VELOCITY_SCALE:.15,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:100,PARTICLE_LINE_WIDTH:1.3,PARTICLE_MULTIPLIER:.4,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.98,COLOR_RAMP:"#47d4fc",COLOR_ALPHA:.95,spData:"data/birds_direction.json",spName:"birds"},mammals:{VELOCITY_SCALE:.15,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:100,PARTICLE_LINE_WIDTH:1.3,PARTICLE_MULTIPLIER:.4,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.98,COLOR_RAMP:"#fc47dc",COLOR_ALPHA:.95,spData:"data/mammals_mag.json",spName:"mammals"}}},activeContentStep:0}},methods:{debounce(t,a=100){let e;return function(...i){clearTimeout(e),e=setTimeout(()=>{t.apply(this,i)},a)}},shortcuts(t){switch(t.srcKey){case"caption":console.log("toggle caption"),this.toggleCaption();break;case"dat":console.log("toggle dat"),this.toggleDat();break}},flyToLocation(t,a){var e={SA:{coords:[-60.28,-11.58],zoom:3.84},NA:{coords:[-94.5,41],zoom:4},West:{coords:[-75,8.3],zoom:2.67},West2:{coords:[-71.12,6.4],zoom:2.41},WestTight:{coords:[-109,44],zoom:8.5},East:{coords:[-78,37],zoom:5},World:{coords:[12.2,17.2],zoom:2}},i=e[a].coords,n=e[a].zoom;console.log("flying to "+a),t.flyTo({center:i,zoom:n,speed:.5,curve:1,essential:!0})},fadeOpacity(t,a,e){var i=this,n=0,o=setInterval((function(){"in"===a?i[t]=n/50:"out"===a&&(i[t]=1-n/50),n++,51===n&&clearInterval(o)}),e/50)},removeDiv(t,a){setTimeout((function(){document.getElementById(t).remove()}),a)},createMap(){var t=this;r.a.accessToken="pk.eyJ1IjoiZG1hamthIiwiYSI6ImNrcmJpMjE2bTR0ZmwydnRmNm4xMG5yMGMifQ.XtPOIE4pFFUEIDcXc8W0oQ";const a=new r.a.Map({container:"map",style:"mapbox://styles/dmajka/ck7c4399204jm1iqrfcvlxf42",center:[-78,19],zoom:3,attributionControl:!0,hash:!0});return a.dragRotate.disable(),a.touchZoomRotate.disableRotation(),a.keyboard.disableRotation(),a.addControl(new r.a.NavigationControl({showCompass:!1}),"top-left"),a.on("load",(function(){a.setPaintProperty("lakes-7oy7ga","fill-opacity",0),a.setPaintProperty("americas-mask2-c5phmk","fill-opacity",1)})),t.map=a,a},calculateParticleWidth(){var t=this.map.getZoom(),a=this,e=1.5;return e=t<2?a.zoomWidth.z2:t<3?a.zoomWidth.z3:t<4?a.zoomWidth.z4:t<5?a.zoomWidth.z5:t<6?a.zoomWidth.z6:a.zoomWidth.z7,e},buildFlow(t,a,e,i,n){fetch(e.spData).then(t=>t.json()).then(o=>{var s,r,c=this,m=document.getElementById("windContainer"+a),d=document.createElement("canvas");function _(t,a,e,i){var n=document.getElementById(e),o=p(t),{north:s,south:l,west:c,east:m}=o,d=n.getContext("2d");d.scale(devicePixelRatio,devicePixelRatio);try{n.style.display="none"}catch{console.log("oops")}a&&a.stop(),r&&clearTimeout(r),r=setTimeout((function(){n.style.display="initial",n.width=o.width,n.height=o.height;var e=t.getContainer();const r={x:e.clientWidth,y:e.clientHeight};a.start([[0,0],[r.x,r.y]],r.x,r.y,[[c,l],[m,s]],i)}),50)}function p(t){var a=t.getCanvas(),e=t.getBounds(),i={width:a.width,height:a.height,north:e.getNorth(),south:e.getSouth(),west:e.getWest(),east:e.getEast(),zoomLevel:t.getZoom()};return i}d.id=a,d.className="flowLayer",d.classList.add(...n),m.appendChild(d),s=new l({canvas:document.getElementById(a),data:o},e),_(t,s,a,this[a+i]),c.map.on("resize",()=>{_(t,s,a,this[a+i])}),c.map.on("move",()=>{_(t,s,a,this[a+i])}),c.map.on("zoom",()=>{_(t,s,a,this[a+i])})})},toggleCaption(){console.log("toggle caption");let t=this.showCaption;this.showCaption=!t},toggleDat(){console.log("toggle Dat");let t=this.showDat;this.showDat=!t},loadFlowLayers(){var t=this;this.amphibsActive=this.config.scene5.amphibs,this.birdsActive=this.config.scene5.birds,this.mammalsActive=this.config.scene5.mammals;var a=this.amphibsActiveWindy,e=this.birdsActiveWindy,i=this.mammalsActiveWindy;this.fadeOpacity("mapCountryLineOpacity","in",10),setTimeout((function(){t.mapCountryLabels=!0}),10),this.buildFlow(t.map,"birds",e,"ActiveWindy",[]),this.buildFlow(t.map,"mammals",i,"ActiveWindy",[]),this.buildFlow(t.map,"amphibs",a,"ActiveWindy",[])},nextContent(){this.activeContentStep=this.activeContentStep+1},previousContent(){this.activeContentStep=this.activeContentStep-1}},mounted:function(){this.createMap(),this.loadFlowLayers()},watch:{mapCountryLabels:{handler(){this.map.on("load",()=>{var t=this.mapCountryLabels;let a=t?"visible":"none";this.map.setLayoutProperty("country-label-lg","visibility",a)})}},mapCityLabels:{handler(){var t=this.mapCityLabels;let a=t?"visible":"none";this.map.setLayoutProperty("place-city-lg-n","visibility",a),this.map.setLayoutProperty("place-city-lg-s","visibility",a)}},mapSatelliteOpacity:{handler(){let t=this.mapSatelliteOpacity;this.map.setPaintProperty("mapbox-satellite","raster-opacity",t)}},mapCountryLineWidth:{handler(){let t=this.mapCountryLineWidth;this.map.setPaintProperty("admin-2-boundaries","line-width",t)}},mapCountryLineOpacity:{handler(){let t=this.mapCountryLineOpacity;this.map.setPaintProperty("admin-2-boundaries","line-opacity",t),this.map.setPaintProperty("admin-2-boundaries-bg","line-opacity",t)}},mapRoadsOpacity:{handler(){let t=this.mapRoadsOpacity;this.map.setPaintProperty("major-roads","line-opacity",t)}},mapLandColor:{handler(){let t=this.mapLandColor;this.map.setPaintProperty("background","background-color",t)}},mapLandOpacity:{handler(){let t=this.mapLandOpacity;this.map.setPaintProperty("background","background-opacity",t)}},mapLakeColor:{handler(){let t=this.mapLakeColor;this.map.setPaintProperty("lakes-7oy7ga","fill-color",t)}},mapLakeOpacity:{handler(){let t=this.mapLakeOpacity;this.map.setPaintProperty("lakes-7oy7ga","fill-opacity",t)}},mapWaterColor:{handler(){let t=this.mapWaterColor;this.map.setPaintProperty("water","fill-color",t)}},mapWaterOpacity:{handler(){let t=this.mapWaterOpacity;this.map.setPaintProperty("water","fill-opacity",t)}},compositeSelected:{deep:!0,handler(){let t=this.map.getZoom();this.map.zoomTo(t)}},amphibsActive:{deep:!0,handler(){let t=this.map.getZoom();this.map.zoomTo(t)}},amphibsColor:{handler(){let t=this.map.getZoom();this.map.zoomTo(t)}},birdsActive:{deep:!0,handler(){let t=this.map.getZoom();this.map.zoomTo(t)}},birdsColor:{handler(){let t=this.map.getZoom();this.map.zoomTo(t)}},mammalsActive:{deep:!0,handler(){let t=this.map.getZoom();this.map.zoomTo(t)}},mammalsColor:{handler(){let t=this.map.getZoom();this.map.zoomTo(t)}}},computed:{activeContent(){return this.content[this.activeContentStep].text},amphibsActiveWindy(){let t=JSON.parse(JSON.stringify(this.amphibsActive));var a=this.amphibsColor;return t.FADE_FILL_STYLE="rgba(0, 0, 0, "+t.FADE_TRANSPARENCY+")",t.COLOR_RAMP=(" "+a).slice(1),t.COMPOSITE_OPERATION=this.compositeSelected,t.PARTICLE_LINE_WIDTH=this.calculateParticleWidth(),t},birdsActiveWindy(){let t=JSON.parse(JSON.stringify(this.birdsActive));var a=this.birdsColor;return t.FADE_FILL_STYLE="rgba(0, 0, 0, "+t.FADE_TRANSPARENCY+")",t.COLOR_RAMP=(" "+a).slice(1),t.COMPOSITE_OPERATION=this.compositeSelected,t.PARTICLE_LINE_WIDTH=this.calculateParticleWidth(),t},mammalsActiveWindy(){let t=JSON.parse(JSON.stringify(this.mammalsActive));var a=this.mammalsColor;return t.FADE_FILL_STYLE="rgba(0, 0, 0, "+t.FADE_TRANSPARENCY+")",t.COLOR_RAMP=(" "+a).slice(1),t.COMPOSITE_OPERATION=this.compositeSelected,t.PARTICLE_LINE_WIDTH=this.calculateParticleWidth(),t}}},m=c,d=(e("0653"),e("2877")),_=Object(d["a"])(m,n,o,!1,null,null,null),p=_.exports,A=e("2247"),h=e.n(A);i["a"].config.productionTip=!1,i["a"].use(e("3717")),i["a"].use(h.a),new i["a"]({render:t=>t(p)}).$mount("#app")},"8fc2":function(t,a,e){}});
//# sourceMappingURL=app.d9e43062.js.map