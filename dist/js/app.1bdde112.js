(function(t){function a(a){for(var i,s,r=a[0],l=a[1],c=a[2],p=0,A=[];p<r.length;p++)s=r[p],Object.prototype.hasOwnProperty.call(o,s)&&o[s]&&A.push(o[s][0]),o[s]=0;for(i in l)Object.prototype.hasOwnProperty.call(l,i)&&(t[i]=l[i]);m&&m(a);while(A.length)A.shift()();return n.push.apply(n,c||[]),e()}function e(){for(var t,a=0;a<n.length;a++){for(var e=n[a],i=!0,r=1;r<e.length;r++){var l=e[r];0!==o[l]&&(i=!1)}i&&(n.splice(a--,1),t=s(s.s=e[0]))}return t}var i={},o={app:0},n=[];function s(a){if(i[a])return i[a].exports;var e=i[a]={i:a,l:!1,exports:{}};return t[a].call(e.exports,e,e.exports,s),e.l=!0,e.exports}s.m=t,s.c=i,s.d=function(t,a,e){s.o(t,a)||Object.defineProperty(t,a,{enumerable:!0,get:e})},s.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},s.t=function(t,a){if(1&a&&(t=s(t)),8&a)return t;if(4&a&&"object"===typeof t&&t&&t.__esModule)return t;var e=Object.create(null);if(s.r(e),Object.defineProperty(e,"default",{enumerable:!0,value:t}),2&a&&"string"!=typeof t)for(var i in t)s.d(e,i,function(a){return t[a]}.bind(null,i));return e},s.n=function(t){var a=t&&t.__esModule?function(){return t["default"]}:function(){return t};return s.d(a,"a",a),a},s.o=function(t,a){return Object.prototype.hasOwnProperty.call(t,a)},s.p="/";var r=window["webpackJsonp"]=window["webpackJsonp"]||[],l=r.push.bind(r);r.push=a,r=r.slice();for(var c=0;c<r.length;c++)a(r[c]);var m=l;n.push([0,"chunk-vendors"]),e()})({0:function(t,a,e){t.exports=e("56d7")},"0681":function(t,a,e){},"56d7":function(t,a,e){"use strict";e.r(a);var i=e("2b0e"),o=function(){var t=this,a=t._self._c;return a("div",{directives:[{name:"shortkey",rawName:"v-shortkey",value:{caption:["ctrl","c"],dat:["ctrl","u"]},expression:"{\n      caption: ['ctrl', 'c'],\n      dat: ['ctrl', 'u'],\n    }"}],staticClass:"nocursor",attrs:{id:"app"},on:{shortkey:t.shortcuts}},[a("keep-alive",[t.showDat?a("div",[a("dat-gui",{staticClass:"dat-gui-ui",attrs:{closeText:"Close controls",openText:"Open controls",closePosition:"bottom",closed:"true"}},[a("dat-folder",{attrs:{label:"Map Properties"}},[a("dat-number",{attrs:{min:0,max:4,step:.1,label:"Country Line Width"},model:{value:t.mapCountryLineWidth,callback:function(a){t.mapCountryLineWidth=a},expression:"mapCountryLineWidth"}}),a("dat-number",{attrs:{min:0,max:1,step:.01,label:"Country Line Opacity"},model:{value:t.mapCountryLineOpacity,callback:function(a){t.mapCountryLineOpacity=a},expression:"mapCountryLineOpacity"}}),a("dat-color",{attrs:{label:"Land Color"},model:{value:t.mapLandColor,callback:function(a){t.mapLandColor=a},expression:"mapLandColor"}}),a("dat-number",{attrs:{min:0,max:1,step:.005,label:"Satellite Opacity"},model:{value:t.mapSatelliteOpacity,callback:function(a){t.mapSatelliteOpacity=a},expression:"mapSatelliteOpacity"}}),a("dat-select",{attrs:{items:t.compositeOptions,label:"Composite Operation"},model:{value:t.compositeSelected,callback:function(a){t.compositeSelected=a},expression:"compositeSelected"}})],1),a("dat-folder",{attrs:{label:"Birds"}},[a("dat-boolean",{attrs:{label:"Display Layer"},model:{value:t.birdsOn,callback:function(a){t.birdsOn=a},expression:"birdsOn"}}),a("dat-color",{attrs:{label:"Birds Color"},model:{value:t.birdsColor,callback:function(a){t.birdsColor=a},expression:"birdsColor"}}),a("dat-number",{attrs:{min:0,max:1,step:.01,label:"Velocity Scale"},model:{value:t.birdsActive.VELOCITY_SCALE,callback:function(a){t.$set(t.birdsActive,"VELOCITY_SCALE",a)},expression:"birdsActive.VELOCITY_SCALE"}}),a("dat-number",{attrs:{min:0,max:200,step:1,label:"Max Particle Age"},model:{value:t.birdsActive.MAX_PARTICLE_AGE,callback:function(a){t.$set(t.birdsActive,"MAX_PARTICLE_AGE",a)},expression:"birdsActive.MAX_PARTICLE_AGE"}}),a("dat-number",{attrs:{min:0,max:2,step:.05,label:"Particle Multiplier"},model:{value:t.birdsActive.PARTICLE_MULTIPLIER,callback:function(a){t.$set(t.birdsActive,"PARTICLE_MULTIPLIER",a)},expression:"birdsActive.PARTICLE_MULTIPLIER"}}),a("dat-number",{attrs:{min:0,max:1,step:.01,label:"Fade Transparency"},model:{value:t.birdsActive.FADE_TRANSPARENCY,callback:function(a){t.$set(t.birdsActive,"FADE_TRANSPARENCY",a)},expression:"birdsActive.FADE_TRANSPARENCY"}}),a("dat-number",{attrs:{min:0,max:1,step:.01,label:"Color Alpha"},model:{value:t.birdsActive.COLOR_ALPHA,callback:function(a){t.$set(t.birdsActive,"COLOR_ALPHA",a)},expression:"birdsActive.COLOR_ALPHA"}})],1),a("dat-folder",{attrs:{label:"Mammals"}},[a("dat-boolean",{attrs:{label:"Display Layer"},model:{value:t.mammalsOn,callback:function(a){t.mammalsOn=a},expression:"mammalsOn"}}),a("dat-color",{attrs:{label:"Mammals Color"},model:{value:t.mammalsColor,callback:function(a){t.mammalsColor=a},expression:"mammalsColor"}}),a("dat-number",{attrs:{min:0,max:1,step:.01,label:"Velocity Scale"},model:{value:t.mammalsActive.VELOCITY_SCALE,callback:function(a){t.$set(t.mammalsActive,"VELOCITY_SCALE",a)},expression:"mammalsActive.VELOCITY_SCALE"}}),a("dat-number",{attrs:{min:0,max:200,step:1,label:"Max Particle Age"},model:{value:t.mammalsActive.MAX_PARTICLE_AGE,callback:function(a){t.$set(t.mammalsActive,"MAX_PARTICLE_AGE",a)},expression:"mammalsActive.MAX_PARTICLE_AGE"}}),a("dat-number",{attrs:{min:0,max:2,step:.05,label:"Particle Multiplier"},model:{value:t.mammalsActive.PARTICLE_MULTIPLIER,callback:function(a){t.$set(t.mammalsActive,"PARTICLE_MULTIPLIER",a)},expression:"mammalsActive.PARTICLE_MULTIPLIER"}}),a("dat-number",{attrs:{min:0,max:1,step:.01,label:"Fade Transparency"},model:{value:t.mammalsActive.FADE_TRANSPARENCY,callback:function(a){t.$set(t.mammalsActive,"FADE_TRANSPARENCY",a)},expression:"mammalsActive.FADE_TRANSPARENCY"}}),a("dat-number",{attrs:{min:0,max:1,step:.01,label:"Color Alpha"},model:{value:t.mammalsActive.COLOR_ALPHA,callback:function(a){t.$set(t.mammalsActive,"COLOR_ALPHA",a)},expression:"mammalsActive.COLOR_ALPHA"}})],1),a("dat-folder",{attrs:{label:"Amphibians"}},[a("dat-boolean",{attrs:{label:"Display Layer"},model:{value:t.amphibsOn,callback:function(a){t.amphibsOn=a},expression:"amphibsOn"}}),a("dat-color",{attrs:{label:"Amphibs Color"},model:{value:t.amphibsColor,callback:function(a){t.amphibsColor=a},expression:"amphibsColor"}}),a("dat-number",{attrs:{min:0,max:1,step:.01,label:"Velocity Scale"},model:{value:t.amphibsActive.VELOCITY_SCALE,callback:function(a){t.$set(t.amphibsActive,"VELOCITY_SCALE",a)},expression:"amphibsActive.VELOCITY_SCALE"}}),a("dat-number",{attrs:{min:0,max:200,step:1,label:"Max Particle Age"},model:{value:t.amphibsActive.MAX_PARTICLE_AGE,callback:function(a){t.$set(t.amphibsActive,"MAX_PARTICLE_AGE",a)},expression:"amphibsActive.MAX_PARTICLE_AGE"}}),a("dat-number",{attrs:{min:0,max:2,step:.05,label:"Particle Multiplier"},model:{value:t.amphibsActive.PARTICLE_MULTIPLIER,callback:function(a){t.$set(t.amphibsActive,"PARTICLE_MULTIPLIER",a)},expression:"amphibsActive.PARTICLE_MULTIPLIER"}}),a("dat-number",{attrs:{min:0,max:1,step:.01,label:"Fade Transparency"},model:{value:t.amphibsActive.FADE_TRANSPARENCY,callback:function(a){t.$set(t.amphibsActive,"FADE_TRANSPARENCY",a)},expression:"amphibsActive.FADE_TRANSPARENCY"}}),a("dat-number",{attrs:{min:0,max:1,step:.01,label:"Color Alpha"},model:{value:t.amphibsActive.COLOR_ALPHA,callback:function(a){t.$set(t.amphibsActive,"COLOR_ALPHA",a)},expression:"amphibsActive.COLOR_ALPHA"}})],1)],1)],1):t._e()]),t.showCaption?a("div",{attrs:{id:"viz-meta"}},[t._m(0),a("div",{attrs:{id:"legend-inline"}},[t.birdsOn?a("div",{staticClass:"legend-item-inline"},[a("div",{staticClass:"legend-color",style:{"background-color":t.birdsColor}}),a("div",{staticClass:"legend-text"},[t._v("Birds")])]):t._e(),t.mammalsOn?a("div",{staticClass:"legend-item-inline"},[a("div",{staticClass:"legend-color",style:{"background-color":t.mammalsColor}}),a("div",{staticClass:"legend-text"},[t._v("Mammals")])]):t._e(),t.amphibsOn?a("div",{staticClass:"legend-item-inline"},[a("div",{staticClass:"legend-color",style:{"background-color":t.amphibsColor}}),a("div",{staticClass:"legend-text"},[t._v("Amphibians")])]):t._e()]),t._l(t.content,(function(e){return a("div",{key:e.step},[a("div",{domProps:{innerHTML:t._s(e.text)}})])})),a("img",{staticClass:"tnc-logo",attrs:{src:"tnc-logo-light.svg",alt:"The Nature Conservancy"}})],2):t._e(),a("div",{staticClass:"wind-map-container nocursor",class:{hide:!t.birdsOn},staticStyle:{display:"initial"},attrs:{id:"windContainerbirds"}}),a("div",{staticClass:"wind-map-container nocursor",class:{hide:!t.mammalsOn},staticStyle:{display:"initial"},attrs:{id:"windContainermammals"}}),a("div",{staticClass:"wind-map-container nocursor",class:{hide:!t.amphibsOn},staticStyle:{display:"initial"},attrs:{id:"windContaineramphibs"}}),t._m(1)],1)},n=[function(){var t=this,a=t._self._c;return a("h1",[t._v("Migrations "),a("br",{staticClass:"title-break"}),t._v("In Motion")])},function(){var t=this,a=t._self._c;return a("div",{staticClass:"mapbox-map-container nocursor"},[a("div",{staticClass:"nocursor",attrs:{id:"map"}})])}],s=e("e192"),r=e.n(s);e("ac6d"),e("14d9");function l(t,a){var e=a.VELOCITY_SCALE,i=a.INTENSITY_SCALE_STEP,o=a.MAX_WIND_INTENSITY,n=a.MAX_PARTICLE_AGE,s=a.PARTICLE_LINE_WIDTH,r=a.PARTICLE_MULTIPLIER/100,l=a.FRAME_RATE,c=a.NULL_WIND_VECTOR,m=a.FADE_FILL_STYLE,p=[a.COLOR_RAMP],A=a.COMPOSITE_OPERATION,d=a.COLOR_ALPHA,_=2*Math.PI,E=function(t,a,e,i,o,n){var s=1-t,r=1-a,l=s*r,c=t*r,m=s*a,p=t*a,A=e[0]*l+i[0]*c+o[0]*m+n[0]*p,d=e[1]*l+i[1]*c+o[1]*m+n[1]*p;return[A,d,Math.sqrt(A*A+d*d)]},L=function(t,a){var e=t.data,i=a.data;return{header:t.header,data:function(t){return[e[t],i[t]]},interpolate:E}},h=function(t){var a=null,e=null;return t.forEach((function(t){switch(t.header.parameterCategory+","+t.header.parameterNumber){case"2,2":a=t;break;case"2,3":e=t;break}})),L(a,e)},u=function(t,a){var e=h(t),i=e.header,o=i.lo1,n=i.la1,s=i.dx,r=i.dy,l=i.nx,c=i.ny,m=new Date(i.refTime);m.setHours(m.getHours()+i.forecastTime);for(var p=[],A=0,d=Math.floor(l*s)>=360,_=0;_<c;_++){for(var E=[],L=0;L<l;L++,A++)E[L]=e.data(A);d&&E.push(E[0]),p[_]=E}function u(t,a){var i,l=C(t-o,360)/s,c=(n-a)/r,m=Math.floor(l),A=m+1,d=Math.floor(c),_=d+1;if(i=p[d]){var E=i[m],L=i[A];if(T(E)&&T(L)&&(i=p[_])){var h=i[m],u=i[A];if(T(h)&&T(u))return e.interpolate(l-m,c-d,E,L,h,u)}}return null}a({date:m,interpolate:u})},T=function(t){return null!==t&&void 0!==t},C=function(t,a){return t-a*Math.floor(t/a)},I=function(t,a,e,i,o,n,s,r){var l=s[0]*n,c=s[1]*n,m=N(t,a,e,i,o,r);return s[0]=m[0]*l+m[2]*c,s[1]=m[1]*l+m[3]*c,s},N=function(t,a,e,i,o,n){var s=Math.pow(10,-5.2),r=a<0?s:-s,l=e<0?s:-s,c=y(e,a+r,n),m=y(e+l,a,n),p=Math.cos(e/360*_);return[(c[0]-i)/r/p,(c[1]-o)/r/p,(m[0]-i)/l,(m[1]-o)/l]},R=function(t,a,e){function i(a,e){var i=t[Math.round(a)];return i&&i[Math.round(e)]||c}i.release=function(){t=[]},i.randomize=function(t){var e,o,n=0;do{e=Math.round(Math.floor(Math.random()*a.width)+a.x),o=Math.round(Math.floor(Math.random()*a.height)+a.y)}while(null===i(e,o)[2]&&n++<30);return t.x=e,t.y=o,t},e(a,i)},b=function(t,a,e){var i=t[0],o=t[1],n=Math.round(i[0]),s=Math.max(Math.floor(i[1],0),0),r=Math.min(Math.ceil(o[1],e),e-1);return{x:n,y:s,xMax:a,yMax:r,width:a,height:e}},P=function(t){return t/180*Math.PI},f=function(t){return t/(Math.PI/180)},v=function(t,a,e){var i=e.east-e.west,o=e.width/f(i)*360/(2*Math.PI),n=o/2*Math.log((1+Math.sin(e.south))/(1-Math.sin(e.south))),s=e.height+n,r=(s-a)/o,l=180/Math.PI*(2*Math.atan(Math.exp(r))-Math.PI/2),c=f(e.west)+t/e.width*f(i);return[c,l]},O=function(t){return Math.log(Math.tan(t/2+Math.PI/4))},y=function(t,a,e){var i=O(e.south),o=O(e.north),n=e.width/(e.east-e.west),s=e.height/(o-i),r=O(P(t)),l=(P(a)-e.west)*n,c=(o-r)*s;return[l,c]},M=function(t,a,i,o){var n={},s=e,r=[],l=a.x;function c(e){for(var o=[],l=a.y;l<=a.yMax;l+=2){var c=v(e,l,i);if(c){var m=c[0],p=c[1];if(isFinite(m)){var A=t.interpolate(m,p);A&&(A=I(n,m,p,e,l,s,A,i),o[l+1]=o[l]=A)}}}r[e+1]=r[e]=o}(function t(){var e=Date.now();while(l<a.width)if(c(l),l+=2,Date.now()-e>1e3)return void setTimeout(t,0);R(r,a,o)})()},S=function(a,e){function c(t,a){var e=p;return e.indexFor=function(t){return Math.floor(Math.min(t,a)/a*(e.length-1))},e}for(var _=c(i,o),E=_.map((function(){return[]})),L=Math.round(a.width*a.height*r),h=[],u=0;u<L;u++)h.push(e.randomize({age:Math.floor(Math.random()*n)+0}));function T(){E.forEach((function(t){t.length=0})),h.forEach((function(t){t.age>n&&(e.randomize(t).age=0);var a=t.x,i=t.y,o=e(a,i),s=o[2];if(null===s)t.age=n;else{var r=a+o[0],l=i+o[1];null!==e(r,l)[2]?(t.xt=r,t.yt=l,E[_.indexFor(s)].push(t)):(t.x=r,t.y=l)}t.age+=1}))}var C=t.canvas.getContext("2d",{powerPreference:"high-performance"});function I(){var t=C.globalCompositeOperation;C.globalCompositeOperation=A,C.fillRect(a.x,a.y,a.width,a.height),C.globalCompositeOperation=t,C.globalAlpha=d,E.forEach((function(t,a){t.length>0&&(C.beginPath(),C.strokeStyle=_[a],t.forEach((function(t){C.moveTo(t.x,t.y),C.lineTo(t.xt,t.yt),t.x=t.xt,t.y=t.yt})),C.stroke())}))}C.lineWidth=s,C.fillStyle=m,C.globalAlpha=d,function t(){try{w.timer=setTimeout((function(){requestAnimationFrame(t),T(),I()}),1e3/l)}catch(a){console.error(a)}}()},g=function(a,c,_,E,L){L&&(s=L.particleLineWidth,p=[L.COLOR_RAMP],d=[L.COLOR_ALPHA],e=L.VELOCITY_SCALE,i=L.INTENSITY_SCALE_STEP,o=L.MAX_WIND_INTENSITY,n=L.MAX_PARTICLE_AGE,s=L.PARTICLE_LINE_WIDTH,r=L.PARTICLE_MULTIPLIER,l=L.FRAME_RATE,m=L.FADE_FILL_STYLE,r=L.PARTICLE_MULTIPLIER/100,A=L.COMPOSITE_OPERATION);var h={south:P(E[0][1]),north:P(E[1][1]),east:P(E[1][0]),west:P(E[0][0]),width:c,height:_};D(),u(t.data,(function(t){M(t,b(a,c,_),h,(function(t,a){w.field=a,S(t,a)}))}))},D=function(){w.field&&w.field.release(),w.timer&&clearTimeout(w.timer)},w={params:t,start:g,stop:D};return w}window.requestAnimationFrame=function(){return window.requestAnimationFrame||window.webkitRequestAnimationFrame||window.mozRequestAnimationFrame||window.oRequestAnimationFrame||window.msRequestAnimationFrame||function(t){window.setTimeout(t,50)}}();var c={name:"App",data:function(){return{showCaption:!0,showDat:!0,mapSatelliteOpacity:0,map:{},mapLandColor:"#000000",mapLandOpacity:1,mapWaterColor:"#ffffff",mapWaterOpacity:1,mapLakeColor:"#a3bbc7",mapLakeOpacity:0,mapCountryLineColor:"#ffffff",mapCountryLineWidth:1,mapCountryLineOpacity:1,mapCountryLabels:!0,mapCityLabels:!0,mapRoadsOpacity:0,activeScenario:"scene1",amphibsOn:!0,amphibsColor:"#fcfa47",amphibsActive:{},amphibsActive2:{},birdsOn:!0,birdsColor:"#47d4fc",birdsActive:{},birdsActive2:{},mammalsOn:!0,mammalsColor:"#fc47dc",mammalsActive:{},mammalsActive2:{},titleFontSize:75,zoomWidth:{default:1.5,z2:1.8,z3:1.5,z4:1.5,z5:.7,z6:.7,z7:.5},compositeOptions:[{name:"destination-over",value:"destination-over"},{name:"destination-atop",value:"destination-atop"},{name:"destination-in",value:"destination-in"},{name:"destination-out",value:"destination-out"},{name:"multiply",value:"multiply"},{name:"hue",value:"hue"}],compositeSelected:"destination-in",default:{zoomWidth:{default:.9,z2:.8,z3:.9,z4:1,z5:.4,z6:.05,z7:.05}},config:{scene1:{amphibs:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:50,PARTICLE_LINE_WIDTH:2.5,PARTICLE_MULTIPLIER:.2,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.7,COLOR_RAMP:"#fcfa47",COLOR_ALPHA:.9,COMPOSITE_OPERATION:"destination-in",spData:"data/perlin8_5_2_direction.json",spName:"amphibs",sceneName:"perlin land + water"},birds:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:25,PARTICLE_LINE_WIDTH:2.5,PARTICLE_MULTIPLIER:.2,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.7,COLOR_RAMP:"#47d4fc",COLOR_ALPHA:.9,COMPOSITE_OPERATION:"destination-in",spData:"data/perlin4_4_1_direction.json",spName:"birds"},mammals:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:25,PARTICLE_LINE_WIDTH:2.5,PARTICLE_MULTIPLIER:.2,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.7,COLOR_RAMP:"#fc47dc",COLOR_ALPHA:.9,COMPOSITE_OPERATION:"destination-in",spData:"data/perlin16_3_4_direction.json",spName:"mammals"}},scene2:{amphibs:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:25,PARTICLE_LINE_WIDTH:2.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.7,COLOR_RAMP:"#fcfa47",COLOR_ALPHA:.9,spData:"data/perlin_8_west.json",spName:"amphibs"},birds:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:25,PARTICLE_LINE_WIDTH:2.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.7,COLOR_RAMP:"#47d4fc",COLOR_ALPHA:.9,spData:"data/perlin_4_west.json",spName:"birds"},mammals:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:25,PARTICLE_LINE_WIDTH:2.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.7,COLOR_RAMP:"#fc47dc",COLOR_ALPHA:.9,spData:"data/perlin_16_west.json",spName:"mammals"}},scene4:{amphibs:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:25,PARTICLE_LINE_WIDTH:2.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.7,COLOR_RAMP:"#fcfa47",COLOR_ALPHA:.9,spData:"data/perlin_8_5_rd_direction.json",spName:"amphibs",sceneName:"perlin land only"},birds:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:25,PARTICLE_LINE_WIDTH:2.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.7,COLOR_RAMP:"#47d4fc",COLOR_ALPHA:.9,spData:"data/perlin4_4_1_r_direction.json",spName:"birds"},mammals:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:25,PARTICLE_LINE_WIDTH:2.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.7,COLOR_RAMP:"#fc47dc",COLOR_ALPHA:.9,spData:"data/perlin16_3_4_m_r_direction.json",spName:"mammals"}},scene5:{amphibs:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:100,PARTICLE_LINE_WIDTH:1.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.98,COLOR_RAMP:"#fcfa47",COLOR_ALPHA:.95,spData:"data/amphibs_mag.json",spName:"amphibs"},birds:{VELOCITY_SCALE:.15,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:100,PARTICLE_LINE_WIDTH:1.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.98,COLOR_RAMP:"#47d4fc",COLOR_ALPHA:.95,spData:"data/birds_direction.json",spName:"birds"},mammals:{VELOCITY_SCALE:.15,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:100,PARTICLE_LINE_WIDTH:1.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.98,COLOR_RAMP:"#fc47dc",COLOR_ALPHA:.95,spData:"data/mammals_mag.json",spName:"mammals"}},scene6:{amphibs:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:100,PARTICLE_LINE_WIDTH:.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.96,COLOR_RAMP:"#fcfa47",COLOR_ALPHA:1,spData:"data/amphibs_mag.json",spName:"amphibs"},birds:{VELOCITY_SCALE:.15,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:100,PARTICLE_LINE_WIDTH:.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.96,COLOR_RAMP:"#47d4fc",COLOR_ALPHA:1,spData:"data/birds_direction.json",spName:"birds"},mammals:{VELOCITY_SCALE:.15,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:100,PARTICLE_LINE_WIDTH:.5,PARTICLE_MULTIPLIER:.3,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.96,COLOR_RAMP:"#fc47dc",COLOR_ALPHA:1,spData:"data/mammals_mag.json",spName:"mammals"}},scene7:{amphibs:{VELOCITY_SCALE:.03,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:100,PARTICLE_LINE_WIDTH:1.3,PARTICLE_MULTIPLIER:.4,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.98,COLOR_RAMP:"#fcfa47",COLOR_ALPHA:.95,spData:"data/amphibs_mag.json",spName:"amphibs"},birds:{VELOCITY_SCALE:.15,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:100,PARTICLE_LINE_WIDTH:1.3,PARTICLE_MULTIPLIER:.4,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.98,COLOR_RAMP:"#47d4fc",COLOR_ALPHA:.95,spData:"data/birds_direction.json",spName:"birds"},mammals:{VELOCITY_SCALE:.15,INTENSITY_SCALE_STEP:10,MAX_WIND_INTENSITY:40,MAX_PARTICLE_AGE:100,PARTICLE_LINE_WIDTH:1.3,PARTICLE_MULTIPLIER:.4,FRAME_RATE:60,NULL_WIND_VECTOR:[NaN,NaN,null],FADE_TRANSPARENCY:.98,COLOR_RAMP:"#fc47dc",COLOR_ALPHA:.95,spData:"data/mammals_mag.json",spName:"mammals"}}},content:[{step:1,text:"<p>As climate change alters habitats and disrupts ecosystems, where will animals move to survive? And will human development prevent them from getting there?</p> <p>This map shows the average direction mammals, birds, and amphibians need to move to track hospitable climates as they shift across the landscape. &darr;</p>"},{step:2,text:'<h2>How?</h2><p>Researchers from University of Washington and The Nature Conservancy modeled potential habitat for 2954 species using climate change projections and the climatic needs of each species.</p> <p>Using flow models from <a href="https://www.circuitscape.org/" target="_blank">electronic circuit theory</a>, they plotted movement routes for each species, connecting current habitats with their projected locations under climate change.</p>'},{step:3,text:'<h2>What Can We Do?</h2> <p>There are a number of ways that conservationists and land managers can <a href="https://blog.nature.org/science/2016/06/29/species-on-the-move-mapping-barriers-for-wildlife-in-a-warming-world/?utm_source=cgs&utm_medium=alsoin&utm_campaign=migrations" target="_blank">re-build or maintain connectivity</a> to improve species’ ability to adapt to warmer temperatures. Removing fencing, adding wildlife overpasses (or underpasses) to major roadways, and better routing of infrastructure like pipelines and powerlines can all help re-connect areas fragmented by human development.</p>'},{step:4,text:"<h2>So...</h2> <p><strong>Q: Does this mean 3000 species will move through my backyard because of climate change?</strong></p><p><strong>A:</strong> No, the researchers used coarse 50 km data, which is good for understanding the big picture view, but not good for understanding local patterns.</p>"},{step:5,text:"<h2>Credits</h2><p>This map was created by <a href='mailto:dmajka@tnc.org' target='_blank'>Dan Majka</a>, who works for The Nature Conservancy's North America Region science team.</p><p>This work would have not been possible without the <a href='https://blog.nature.org/science/2018/04/26/innovation-for-conservation-brad-mcrae-1966-2017/' target='_blank'>pioneering connectivity science of Brad McRae (1966-2017).</p>"},{step:7,text:'<h2>References</h2><p>Lawler, JJ, et al. 2013. <a href="Lawler.2013.EcolLettersClimateRoutes.pdf" target="_blank">Projected climate-driven faunal movement routes</a>. Ecology Letters 16(8): 1014-1022. </p><p>McGuire, JL, et al. 2016. <a href="http://www.pnas.org/content/113/26/7195.abstract" target="_blank">Achieving climate connectivity in a fragmented landscape</a>. Proceedings of the National Academy of Sciences: 113: 7195-7200.</p>'}],activeContentStep:0}},methods:{debounce(t,a=100){let e;return function(...i){clearTimeout(e),e=setTimeout(()=>{t.apply(this,i)},a)}},shortcuts(t){switch(t.srcKey){case"caption":console.log("toggle caption"),this.toggleCaption();break;case"dat":console.log("toggle dat"),this.toggleDat();break}},flyToLocation(t,a){var e={SA:{coords:[-60.28,-11.58],zoom:3.84},NA:{coords:[-94.5,41],zoom:4},West:{coords:[-75,8.3],zoom:2.67},West2:{coords:[-71.12,6.4],zoom:2.41},WestTight:{coords:[-109,44],zoom:8.5},East:{coords:[-78,37],zoom:5},World:{coords:[12.2,17.2],zoom:2}},i=e[a].coords,o=e[a].zoom;console.log("flying to "+a),t.flyTo({center:i,zoom:o,speed:.5,curve:1,essential:!0})},fadeOpacity(t,a,e){var i=this,o=0,n=setInterval((function(){"in"===a?i[t]=o/50:"out"===a&&(i[t]=1-o/50),o++,51===o&&clearInterval(n)}),e/50)},removeDiv(t,a){setTimeout((function(){document.getElementById(t).remove()}),a)},createMap(){var t=this;r.a.accessToken="pk.eyJ1IjoiZG1hamthIiwiYSI6ImNrcmJpMjE2bTR0ZmwydnRmNm4xMG5yMGMifQ.XtPOIE4pFFUEIDcXc8W0oQ";const a=new r.a.Map({container:"map",style:"mapbox://styles/dmajka/ck7c4399204jm1iqrfcvlxf42",center:[-78,19],zoom:3,attributionControl:!0,hash:!0});return a.dragRotate.disable(),a.touchZoomRotate.disableRotation(),a.addControl(new r.a.NavigationControl({showCompass:!1}),"top-left"),a.on("load",()=>{console.log("map loaded")}),a.once("idle",()=>{console.log("map once idle")}),a.on("load",(function(){a.setPaintProperty("lakes-7oy7ga","fill-opacity",0),a.setPaintProperty("americas-mask2-c5phmk","fill-opacity",1)})),t.map=a,a},calculateParticleWidth(){var t=this.map.getZoom(),a=this,e=1.5;return e=t<2?a.zoomWidth.z2:t<3?a.zoomWidth.z3:t<4?a.zoomWidth.z4:t<5?a.zoomWidth.z5:t<6?a.zoomWidth.z6:a.zoomWidth.z7,console.log("particle width",e),e},buildFlow(t,a,e,i,o){fetch(e.spData).then(t=>t.json()).then(n=>{var s,r,c=this,m=document.getElementById("windContainer"+a),p=document.createElement("canvas");function A(t,a,e,i){var o=document.getElementById(e),n=d(t),{north:s,south:l,west:c,east:m,width:p,height:A}=n;try{o.style.display="none"}catch{console.log("oops")}a&&a.stop(),r&&clearTimeout(r),r=setTimeout((function(){var t,e;o.style.display="initial",o.width=p,o.height=A,1===window.devicePixelRatio?(t=p,e=A):(t=p/2,e=A/2),a.start([[0,0],[t,e]],t,e,[[c,l],[m,s]],i)}),50)}function d(t){var a=t.getCanvas(),e=t.getBounds(),i={width:a.width,height:a.height,north:e.getNorth(),south:e.getSouth(),west:e.getWest(),east:e.getEast(),zoomLevel:t.getZoom()};return i}p.id=a,p.className="flowLayer",p.classList.add(...o),m.appendChild(p),s=new l({canvas:document.getElementById(a),data:n},e),A(t,s,a,this[a+i]),c.map.on("resize",()=>{A(t,s,a,this[a+i])}),c.map.on("move",()=>{A(t,s,a,this[a+i])}),c.map.on("zoom",()=>{A(t,s,a,this[a+i])})})},toggleCaption(){console.log("toggle caption");let t=this.showCaption;this.showCaption=!t},toggleDat(){console.log("toggle Dat");let t=this.showDat;this.showDat=!t},loadFlowLayers(){var t=this;this.amphibsActive=this.config.scene5.amphibs,this.birdsActive=this.config.scene5.birds,this.mammalsActive=this.config.scene5.mammals;var a=this.amphibsActiveWindy,e=this.birdsActiveWindy,i=this.mammalsActiveWindy;this.fadeOpacity("mapCountryLineOpacity","in",10),setTimeout((function(){t.mapCountryLabels=!0}),10),this.buildFlow(t.map,"birds",e,"ActiveWindy",[]),this.buildFlow(t.map,"mammals",i,"ActiveWindy",[]),this.buildFlow(t.map,"amphibs",a,"ActiveWindy",[])},nextContent(){this.activeContentStep=this.activeContentStep+1},previousContent(){this.activeContentStep=this.activeContentStep-1}},mounted:function(){this.createMap(),this.loadFlowLayers()},watch:{mapCountryLabels:{handler(){var t=this.mapCountryLabels;let a=t?"visible":"none";this.map.setLayoutProperty("country-label-lg","visibility",a)}},mapCityLabels:{handler(){var t=this.mapCityLabels;let a=t?"visible":"none";this.map.setLayoutProperty("place-city-lg-n","visibility",a),this.map.setLayoutProperty("place-city-lg-s","visibility",a)}},mapSatelliteOpacity:{handler(){let t=this.mapSatelliteOpacity;this.map.setPaintProperty("mapbox-satellite","raster-opacity",t)}},mapCountryLineWidth:{handler(){let t=this.mapCountryLineWidth;this.map.setPaintProperty("admin-2-boundaries","line-width",t)}},mapCountryLineOpacity:{handler(){let t=this.mapCountryLineOpacity;this.map.setPaintProperty("admin-2-boundaries","line-opacity",t),this.map.setPaintProperty("admin-2-boundaries-bg","line-opacity",t)}},mapRoadsOpacity:{handler(){let t=this.mapRoadsOpacity;this.map.setPaintProperty("major-roads","line-opacity",t)}},mapLandColor:{handler(){let t=this.mapLandColor;this.map.setPaintProperty("background","background-color",t)}},mapLandOpacity:{handler(){let t=this.mapLandOpacity;this.map.setPaintProperty("background","background-opacity",t)}},mapLakeColor:{handler(){let t=this.mapLakeColor;this.map.setPaintProperty("lakes-7oy7ga","fill-color",t)}},mapLakeOpacity:{handler(){let t=this.mapLakeOpacity;this.map.setPaintProperty("lakes-7oy7ga","fill-opacity",t)}},mapWaterColor:{handler(){let t=this.mapWaterColor;this.map.setPaintProperty("water","fill-color",t)}},mapWaterOpacity:{handler(){let t=this.mapWaterOpacity;this.map.setPaintProperty("water","fill-opacity",t)}},compositeSelected:{deep:!0,handler(){let t=this.map.getZoom();this.map.zoomTo(t)}},amphibsActive:{deep:!0,handler(){let t=this.map.getZoom();this.map.zoomTo(t)}},amphibsColor:{handler(){let t=this.map.getZoom();this.map.zoomTo(t)}},birdsActive:{deep:!0,handler(){let t=this.map.getZoom();this.map.zoomTo(t)}},birdsColor:{handler(){let t=this.map.getZoom();this.map.zoomTo(t)}},mammalsActive:{deep:!0,handler(){let t=this.map.getZoom();this.map.zoomTo(t)}},mammalsColor:{handler(){let t=this.map.getZoom();this.map.zoomTo(t)}}},computed:{activeContent(){return this.content[this.activeContentStep].text},amphibsActiveWindy(){let t=JSON.parse(JSON.stringify(this.amphibsActive));var a=this.amphibsColor;return t.FADE_FILL_STYLE="rgba(0, 0, 0, "+t.FADE_TRANSPARENCY+")",t.COLOR_RAMP=(" "+a).slice(1),t.COMPOSITE_OPERATION=this.compositeSelected,t.PARTICLE_LINE_WIDTH=this.calculateParticleWidth(),t},birdsActiveWindy(){let t=JSON.parse(JSON.stringify(this.birdsActive));var a=this.birdsColor;return t.FADE_FILL_STYLE="rgba(0, 0, 0, "+t.FADE_TRANSPARENCY+")",t.COLOR_RAMP=(" "+a).slice(1),t.COMPOSITE_OPERATION=this.compositeSelected,t.PARTICLE_LINE_WIDTH=this.calculateParticleWidth(),t},mammalsActiveWindy(){let t=JSON.parse(JSON.stringify(this.mammalsActive));var a=this.mammalsColor;return t.FADE_FILL_STYLE="rgba(0, 0, 0, "+t.FADE_TRANSPARENCY+")",t.COLOR_RAMP=(" "+a).slice(1),t.COMPOSITE_OPERATION=this.compositeSelected,t.PARTICLE_LINE_WIDTH=this.calculateParticleWidth(),t}}},m=c,p=(e("7bb8"),e("2877")),A=Object(p["a"])(m,o,n,!1,null,null,null),d=A.exports,_=e("2247"),E=e.n(_);i["a"].config.productionTip=!1,i["a"].use(e("3717")),i["a"].use(E.a),new i["a"]({render:t=>t(d)}).$mount("#app")},"7bb8":function(t,a,e){"use strict";e("0681")}});
//# sourceMappingURL=app.1bdde112.js.map